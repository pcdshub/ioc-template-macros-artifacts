#!$$IOCTOP/bin/$$ARCH/ims

< envPaths

epicsEnvSet( "EPICS_NAME",           "$$TRANSLATE(IOCNAME,"a-z_-","A-Z::")" )
epicsEnvSet( "LOCATION",             "$$LOCATION"  )
epicsEnvSet( "IOCSH_PS1",            "$$IOCNAME> " )

epicsEnvSet( "DVER",                 "4"           )
epicsEnvSet( "STREAM_PROTOCOL_PATH", "$(IMS)/misc" )

epicsEnvSet( "ENGINEER",             "$$ENGINEER"  )


# Run common startup commands for linux soft IOC's
< /reg/d/iocCommon/All/pre_linux.cmd

# Register all support components
dbLoadDatabase( "$(TOP)/dbd/ims.dbd" )
ims_registerRecordDeviceDriver( pdbbase )

# Load record instances
dbLoadRecords( "$(TOP)/db/iocSoft.db",            "IOC=$(EPICS_NAME)" )
dbLoadRecords( "$(TOP)/db/save_restoreStatus.db", "IOC=$(EPICS_NAME)" )
dbLoadRecords( "$(TOP)/db/check_update.db",       "IOC=$(EPICS_NAME)" )

$$LOOP(IPM)
dbLoadRecords( "$(TOP)/db/ims_short.db", "IOC=$(EPICS_NAME),MOTOR=$$DIODE_X,PORT=$$DDX_PORT,ASYN=$$IF(DDX_ASYN,$$DDX_ASYN,$$DIODE_X),DVER=$(DVER),ERBL=$$DDX_ERBL" )
dbLoadRecords( "$(TOP)/db/ims_short.db", "IOC=$(EPICS_NAME),MOTOR=$$DIODE_Y,PORT=$$DDY_PORT,ASYN=$$IF(DDY_ASYN,$$DDY_ASYN,$$DIODE_Y),DVER=$(DVER),ERBL=$$DDY_ERBL" )
dbLoadRecords( "$(TOP)/db/ims_short.db", "IOC=$(EPICS_NAME),MOTOR=$$TARGET_Y,PORT=$$TTY_PORT,ASYN=$$IF(TTY_ASYN,$$TTY_ASYN,$$TARGET_Y),DVER=$(DVER),ERBL=$$TTY_ERBL" )

dbLoadRecords( "$(TOP)/db/one_state.db", "DEVICE=$$NAME:DIODE,STATE=IN,SET=$$IF(DIN_POS,$$DIN_POS,0),DELTA=$$IF(DIN_DLT,$$DIN_DLT,0.5),MOVER=$$DIODE_Y.VAL,RBV=$$DIODE_Y.RBV,DMOV=$$DIODE_Y.DMOV" )
dbLoadRecords( "$(TOP)/db/one_state.db", "DEVICE=$$NAME:DIODE,STATE=OUT,SET=$$IF(DOUT_POS,$$DOUT_POS,-40),DELTA=$$IF(DOUT_DLT,$$DOUT_DLT,5.0),MOVER=$$DIODE_Y.VAL,RBV=$$DIODE_Y.RBV,DMOV=$$DIODE_Y.DMOV" )
dbLoadRecords( "$(TOP)/db/device_with_2states.db", "DEVICE=$$NAME:DIODE,STATE1=IN,SEVR1=$$IF(DIN_SEVR,$$DIN_SEVR,MINOR),STATE2=OUT,SEVR2=$$IF(DOUT_SEVR,$$DOUT_SEVR,NO_ALARM)" )
dbLoadRecords( "$(TOP)/db/alias.db", "SOURCE=$$DIODE_Y,ALIAS=$$NAME:DIODE:MOTOR" )
dbLoadRecords( "$(TOP)/db/alias.db", "SOURCE=$$DIODE_X,ALIAS=$$NAME:DIODE:X_MOTOR" )

dbLoadRecords( "$(TOP)/db/one_state.db", "DEVICE=$$NAME:TARGET,STATE=$$IF(T1,$$T1,1),SET=$$IF(T_POS1,$$T_POS1,0),DELTA=$$IF(TIN_DLT,$$TIN_DLT,0.5),MOVER=$$TARGET_Y.VAL,RBV=$$TARGET_Y.RBV,DMOV=$$TARGET_Y.DMOV" )
dbLoadRecords( "$(TOP)/db/one_state.db", "DEVICE=$$NAME:TARGET,STATE=$$IF(T2,$$T2,2),SET=$$IF(T_POS2,$$T_POS2,16),DELTA=$$IF(TIN_DLT,$$TIN_DLT,0.5),MOVER=$$TARGET_Y.VAL,RBV=$$TARGET_Y.RBV,DMOV=$$TARGET_Y.DMOV" )
dbLoadRecords( "$(TOP)/db/one_state.db", "DEVICE=$$NAME:TARGET,STATE=$$IF(T3,$$T3,3),SET=$$IF(T_POS3,$$T_POS3,30),DELTA=$$IF(TIN_DLT,$$TIN_DLT,0.5),MOVER=$$TARGET_Y.VAL,RBV=$$TARGET_Y.RBV,DMOV=$$TARGET_Y.DMOV" )
dbLoadRecords( "$(TOP)/db/one_state.db", "DEVICE=$$NAME:TARGET,STATE=$$IF(T4,$$T4,4),SET=$$IF(T_POS4,$$T_POS4,43),DELTA=$$IF(TIN_DLT,$$TIN_DLT,0.5),MOVER=$$TARGET_Y.VAL,RBV=$$TARGET_Y.RBV,DMOV=$$TARGET_Y.DMOV" )
dbLoadRecords( "$(TOP)/db/one_state.db", "DEVICE=$$NAME:TARGET,STATE=OUT,SET=$$IF(TOUT_POS,$$TOUT_POS,56),DELTA=$$IF(TOUT_DLT,$$TOUT_DLT,5.0),MOVER=$$TARGET_Y.VAL,RBV=$$TARGET_Y.RBV,DMOV=$$TARGET_Y.DMOV" )

dbLoadRecords( "$(TOP)/db/device_with_5states.db", "DEVICE=$$NAME:TARGET,STATE1=$$IF(T1,$$T1,1),SEVR1=$$IF(T_SEVR1,$$T_SEVR1,MINOR),STATE2=$$IF(T2,$$T2,2),SEVR2=$$IF(T_SEVR2,$$T_SEVR2,MINOR),STATE3=$$IF(T3,$$T3,3),SEVR3=$$IF(T_SEVR3,$$T_SEVR3,MINOR),STATE4=$$IF(T4,$$T4,4),SEVR4=$$IF(T_SEVR4,$$T_SEVR4,MINOR),STATE5=OUT,SEVR5=NO_ALARM" )
dbLoadRecords( "$(TOP)/db/alias.db", "SOURCE=$$TARGET_Y,ALIAS=$$NAME:TARGET:MOTOR" )
$$ENDLOOP(IPM)

$$LOOP(PIM)
dbLoadRecords( "$(TOP)/db/ims_short.db", "IOC=$(EPICS_NAME),MOTOR=$$MOTOR,PORT=$$PORT,ASYN=$$IF(ASYN,$$ASYN,$$MOTOR),DVER=$(DVER),ERBL=$$ERBL" )
dbLoadRecords( "$(TOP)/db/one_state.db", "DEVICE=$$NAME,STATE=YAG,SET=$$IF(YAG_POS,$$YAG_POS,0),DELTA=$$IF(YAG_DLT,$$YAG_DLT,0.5),MOVER=$$MOTOR.VAL,RBV=$$MOTOR.RBV,DMOV=$$MOTOR.DMOV" )
dbLoadRecords( "$(TOP)/db/one_state.db", "DEVICE=$$NAME,STATE=OUT,SET=$$IF(OUT_POS,$$OUT_POS,-52),DELTA=$$IF(OUT_DLT,$$OUT_DLT,5.0),MOVER=$$MOTOR.VAL,RBV=$$MOTOR.RBV,DMOV=$$MOTOR.DMOV" )
$$IF(DIODE_POS)
dbLoadRecords( "$(TOP)/db/one_state.db", "DEVICE=$$NAME,STATE=DIODE,SET=$$IF(DIODE_POS,$$DIODE_POS,26),DELTA=$$IF(DIODE_DLT,$$DIODE_DLT,0.5),MOVER=$$MOTOR.VAL,RBV=$$MOTOR.RBV,DMOV=$$MOTOR.DMOV" )
dbLoadRecords( "$(TOP)/db/device_with_3states.db", "DEVICE=$$NAME,STATE1=DIODE,SEVR1=$$IF(DIODE_SEVR,$$DIODE_SEVR,MINOR),STATE2=YAG,SEVR2=$$IF(YAG_SEVR,$$YAG_SEVR,MINOR),STATE3=OUT,SEVR3=$$IF(OUT_SEVR,$$OUT_SEVR,NO_ALARM)" )
$$ELSE(DIODE_POS)
dbLoadRecords( "$(TOP)/db/device_with_2states.db", "DEVICE=$$NAME,STATE1=YAG,SEVR1=$$IF(YAG_SEVR,$$YAG_SEVR,MINOR),STATE2=OUT,SEVR2=$$IF(OUT_SEVR,$$OUT_SEVR,NO_ALARM)" )
$$ENDIF(DIODE_POS)
dbLoadRecords( "$(TOP)/db/alias.db", "SOURCE=$$MOTOR,ALIAS=$$NAME:MOTOR" )

dbLoadRecords( "$(TOP)/db/ims_short.db", "IOC=$(EPICS_NAME),MOTOR=$$ZOOM,PORT=$$ZOOM_PORT,ASYN=$$IF(ZOOM_ASYN,$$ZOOM_ASYN,$$ZOOM),DVER=$(DVER),ERBL=$$ZOOM_ERBL" )
dbLoadRecords( "$(TOP)/db/alias.db", "SOURCE=$$ZOOM,ALIAS=$$NAME:ZOOM_MOTOR" )
dbLoadRecords( "$(TOP)/db/zoom_lens.db", "NAME=$$NAME,IN=$$ZOOM.RBV CPP,OUT=$$ZOOM.VAL CPP,NMAX=$$IF(ZOOM_NMAX,$$ZOOM_NMAX,64)" )
$$IF(FOCUS)
dbLoadRecords( "$(TOP)/db/ims_short.db", "IOC=$(EPICS_NAME),MOTOR=$$FOCUS,PORT=$$FOCUS_PORT,ASYN=$$IF(FOCUS_ASYN,$$FOCUS_ASYN,$$FOCUS),DVER=$(DVER),ERBL=$$FOCUS_ERBL" )
dbLoadRecords( "$(TOP)/db/alias.db", "SOURCE=$$FOCUS,ALIAS=$$NAME:FOCUS_MOTOR" )
$$ENDIF(FOCUS)
$$ENDLOOP(PIM)

$$LOOP(NAVITAR)
dbLoadRecords( "$(TOP)/db/ims_short.db", "IOC=$(EPICS_NAME),MOTOR=$$ZOOM,PORT=$$ZOOM_PORT,ASYN=$$IF(ZOOM_ASYN,$$ZOOM_ASYN,$$ZOOM),DVER=$(DVER),ERBL=$$ZOOM_ERBL" )
dbLoadRecords( "$(TOP)/db/zoom_lens.db", "NAME=$$NAME,IN=$$ZOOM.RBV CPP,OUT=$$ZOOM.VAL CPP,NMAX=$$IF(ZOOM_NMAX,$$ZOOM_NMAX,64)" )
$$IF(FOCUS)
dbLoadRecords( "$(TOP)/db/ims_short.db", "IOC=$(EPICS_NAME),MOTOR=$$FOCUS,PORT=$$FOCUS_PORT,ASYN=$$IF(FOCUS_ASYN,$$FOCUS_ASYN,$$FOCUS),DVER=$(DVER),ERBL=$$FOCUS_ERBL" )
$$ENDIF(FOCUS)
$$ENDLOOP(NAVITAR)

$$LOOP(PFLS)
dbLoadRecords( "$(TOP)/db/ims_short.db", "IOC=$(EPICS_NAME),MOTOR=$$Y,PORT=$$Y_PORT,ASYN=$$IF(Y_ASYN,$$Y_ASYN,$$Y),DVER=$(DVER),ERBL=$$Y_ERBL" )
dbLoadRecords( "$(TOP)/db/one_state.db", "DEVICE=$$NAME:Y,STATE=$$IF(L1,$$L1,PACK1),SET=$$IF(L_POS1,$$L_POS1,0),DELTA=$$IF(IN_DLT,$$IN_DLT,0.5),MOVER=$$Y.VAL,RBV=$$Y.RBV,DMOV=$$Y.DMOV" )
dbLoadRecords( "$(TOP)/db/one_state.db", "DEVICE=$$NAME:Y,STATE=$$IF(L2,$$L2,PACK2),SET=$$IF(L_POS2,$$L_POS2,16),DELTA=$$IF(IN_DLT,$$IN_DLT,0.5),MOVER=$$Y.VAL,RBV=$$Y.RBV,DMOV=$$Y.DMOV" )
dbLoadRecords( "$(TOP)/db/one_state.db", "DEVICE=$$NAME:Y,STATE=$$IF(L3,$$L3,PACK3),SET=$$IF(L_POS3,$$L_POS3,30),DELTA=$$IF(IN_DLT,$$IN_DLT,0.5),MOVER=$$Y.VAL,RBV=$$Y.RBV,DMOV=$$Y.DMOV" )
dbLoadRecords( "$(TOP)/db/one_state.db", "DEVICE=$$NAME:Y,STATE=OUT,SET=$$IF(OUT_POS,$$OUT_POS,56),DELTA=$$IF(OUT_DLT,$$OUT_DLT,5.0),MOVER=$$Y.VAL,RBV=$$Y.RBV,DMOV=$$Y.DMOV" )
dbLoadRecords( "$(TOP)/db/device_with_4states.db", "DEVICE=$$NAME:Y,STATE1=$$IF(L1,$$L1,PACK1),SEVR1=$$IF(SEVR1,$$SEVR1,MINOR),STATE2=$$IF(L2,$$L2,PACK2),SEVR2=$$IF(SEVR2,$$SEVR2,MINOR),STATE3=$$IF(L3,$$L3,PACK3),SEVR3=$$IF(SEVR3,$$SEVR3,MINOR),STATE4=OUT,SEVR4=NO_ALARM" )
dbLoadRecords( "$(TOP)/db/alias.db", "SOURCE=$$Y,ALIAS=$$NAME:Y:MOTOR" )

dbLoadRecords( "$(TOP)/db/ims_short.db", "IOC=$(EPICS_NAME),MOTOR=$$X,PORT=$$X_PORT,ASYN=$$IF(X_ASYN,$$X_ASYN,$$X),DVER=$(DVER),ERBL=$$X_ERBL" )
dbLoadRecords( "$(TOP)/db/one_state.db", "DEVICE=$$NAME:X,STATE=$$IF(L1,$$L1,PACK1),SET=$$IF(L_XPOS1,$$L_POS1,0),DELTA=$$IF(IN_DLT_X,$$IN_DLT_X,0.1),MOVER=$$X.VAL,RBV=$$X.RBV,DMOV=$$X.DMOV" )
dbLoadRecords( "$(TOP)/db/one_state.db", "DEVICE=$$NAME:X,STATE=$$IF(L2,$$L2,PACK2),SET=$$IF(L_XPOS2,$$L_POS2,0),DELTA=$$IF(IN_DLT_X,$$IN_DLT_X,0.1),MOVER=$$X.VAL,RBV=$$X.RBV,DMOV=$$X.DMOV" )
dbLoadRecords( "$(TOP)/db/one_state.db", "DEVICE=$$NAME:X,STATE=$$IF(L3,$$L3,PACK3),SET=$$IF(L_XPOS3,$$L_POS3,0),DELTA=$$IF(IN_DLT_X,$$IN_DLT_X,0.1),MOVER=$$X.VAL,RBV=$$X.RBV,DMOV=$$X.DMOV" )
dbLoadRecords( "$(TOP)/db/one_state.db", "DEVICE=$$NAME:X,STATE=OUT,SET=$$IF(OUT_XPOS,$$OUT_XPOS,0),DELTA=$$IF(OUT_DLT_X,$$OUT_DLT_X,1.0),MOVER=$$X.VAL,RBV=$$X.RBV,DMOV=$$X.DMOV" )
dbLoadRecords( "$(TOP)/db/device_with_4states.db", "DEVICE=$$NAME:X,STATE1=$$IF(L1,$$L1,PACK1),SEVR1=$$IF(SEVR1,$$SEVR1,MINOR),STATE2=$$IF(L2,$$L2,PACK2),SEVR2=$$IF(SEVR2,$$SEVR2,MINOR),STATE3=$$IF(L3,$$L3,PACK3),SEVR3=$$IF(SEVR3,$$SEVR3,MINOR),STATE4=OUT,SEVR4=NO_ALARM" )
dbLoadRecords( "$(TOP)/db/alias.db", "SOURCE=$$X,ALIAS=$$NAME:X:MOTOR" )

dbLoadRecords( "$(TOP)/db/state_with_2components.db", "DEVICE=$$NAME,STATE=$$IF(L1,$$L1,PACK1),COMP1=$$NAME:Y,COMP2=$$NAME:X" )
dbLoadRecords( "$(TOP)/db/state_with_2components.db", "DEVICE=$$NAME,STATE=$$IF(L2,$$L2,PACK2),COMP1=$$NAME:Y,COMP2=$$NAME:X" )
dbLoadRecords( "$(TOP)/db/state_with_2components.db", "DEVICE=$$NAME,STATE=$$IF(L3,$$L3,PACK3),COMP1=$$NAME:Y,COMP2=$$NAME:X" )
dbLoadRecords( "$(TOP)/db/state_with_2components.db", "DEVICE=$$NAME,STATE=OUT,COMP1=$$NAME:Y,COMP2=$$NAME:X" )
dbLoadRecords( "$(TOP)/db/device_with_4states.db", "DEVICE=$$NAME,STATE1=$$IF(L1,$$L1,PACK1),SEVR1=$$IF(SEVR1,$$SEVR1,MINOR),STATE2=$$IF(L2,$$L2,PACK2),SEVR2=$$IF(SEVR2,$$SEVR2,MINOR),STATE3=$$IF(L3,$$L3,PACK3),SEVR3=$$IF(SEVR3,$$SEVR3,MINOR),STATE4=OUT,SEVR4=NO_ALARM" )
$$ENDLOOP(PFLS)

$$LOOP(XFLS)
dbLoadRecords( "$(TOP)/db/ims_short.db", "IOC=$(EPICS_NAME),MOTOR=$$X,PORT=$$X_PORT,ASYN=$$IF(X_ASYN,$$X_ASYN,$$X),DVER=$(DVER),ERBL=$$X_ERBL" )
dbLoadRecords( "$(TOP)/db/ims_short.db", "IOC=$(EPICS_NAME),MOTOR=$$Y,PORT=$$Y_PORT,ASYN=$$IF(Y_ASYN,$$Y_ASYN,$$Y),DVER=$(DVER),ERBL=$$Y_ERBL" )
$$IF(Z)
dbLoadRecords( "$(TOP)/db/ims_short.db", "IOC=$(EPICS_NAME),MOTOR=$$Z,PORT=$$Z_PORT,ASYN=$$IF(Z_ASYN,$$Z_ASYN,$$Z),DVER=$(DVER),ERBL=$$Z_ERBL" )
$$ENDIF(Z)

dbLoadRecords( "$(TOP)/db/one_state.db", "DEVICE=$$NAME,STATE=$$IF(L1,$$L1,PACK1),SET=$$IF(L_POS1,$$L_POS1,0),DELTA=$$IF(IN_DLT,$$IN_DLT,0.5),MOVER=$$Y.VAL,RBV=$$Y.RBV,DMOV=$$Y.DMOV" )
dbLoadRecords( "$(TOP)/db/one_state.db", "DEVICE=$$NAME,STATE=$$IF(L2,$$L2,PACK2),SET=$$IF(L_POS2,$$L_POS2,16),DELTA=$$IF(IN_DLT,$$IN_DLT,0.5),MOVER=$$Y.VAL,RBV=$$Y.RBV,DMOV=$$Y.DMOV" )
dbLoadRecords( "$(TOP)/db/one_state.db", "DEVICE=$$NAME,STATE=$$IF(L3,$$L3,PACK3),SET=$$IF(L_POS3,$$L_POS3,30),DELTA=$$IF(IN_DLT,$$IN_DLT,0.5),MOVER=$$Y.VAL,RBV=$$Y.RBV,DMOV=$$Y.DMOV" )
dbLoadRecords( "$(TOP)/db/one_state.db", "DEVICE=$$NAME,STATE=OUT,SET=$$IF(OUT_POS,$$OUT_POS,56),DELTA=$$IF(OUT_DLT,$$OUT_DLT,5.0),MOVER=$$Y.VAL,RBV=$$Y.RBV,DMOV=$$Y.DMOV" )

dbLoadRecords( "$(TOP)/db/device_with_4states.db", "DEVICE=$$NAME,STATE1=$$IF(L1,$$L1,PACK1),SEVR1=$$IF(SEVR1,$$SEVR1,MINOR),STATE2=$$IF(L2,$$L2,PACK2),SEVR2=$$IF(SEVR2,$$SEVR2,MINOR),STATE3=$$IF(L3,$$L3,PACK3),SEVR3=$$IF(SEVR3,$$SEVR3,MINOR),STATE4=OUT,SEVR4=NO_ALARM" )
dbLoadRecords( "$(TOP)/db/alias.db", "SOURCE=$$X,ALIAS=$$NAME:X:MOTOR" )
dbLoadRecords( "$(TOP)/db/alias.db", "SOURCE=$$Y,ALIAS=$$NAME:Y:MOTOR" )
$$IF(Z)
dbLoadRecords( "$(TOP)/db/alias.db", "SOURCE=$$Z,ALIAS=$$NAME:Z:MOTOR" )
$$ENDIF(Z)
$$ENDLOOP(XFLS)

$$LOOP(TT)
dbLoadRecords( "$(TOP)/db/ims_short.db", "IOC=$(EPICS_NAME),MOTOR=$$X,PORT=$$X_PORT,ASYN=$$IF(X_ASYN,$$X_ASYN,$$X),DVER=$(DVER),ERBL=$$X_ERBL" )
dbLoadRecords( "$(TOP)/db/ims_short.db", "IOC=$(EPICS_NAME),MOTOR=$$Y,PORT=$$Y_PORT,ASYN=$$IF(Y_ASYN,$$Y_ASYN,$$Y),DVER=$(DVER),ERBL=$$Y_ERBL" )

dbLoadRecords( "$(TOP)/db/one_state.db", "DEVICE=$$NAME:Y,STATE=OUT,SET=$$IF(OUT_POS,$$OUT_POS,56),DELTA=$$IF(OUT_DLT,$$OUT_DLT,5.0),MOVER=$$Y.VAL,RBV=$$Y.RBV,DMOV=$$Y.DMOV" )
dbLoadRecords( "$(TOP)/db/one_state.db", "DEVICE=$$NAME:Y,STATE=$$IF(T1,$$T1,TARGET1),SET=$$IF(T_POS1,$$T_POS1,-49),DELTA=$$IF(IN_DLT,$$IN_DLT,0.5),MOVER=$$Y.VAL,RBV=$$Y.RBV,DMOV=$$Y.DMOV" )
dbLoadRecords( "$(TOP)/db/one_state.db", "DEVICE=$$NAME:Y,STATE=$$IF(T2,$$T2,TARGET2),SET=$$IF(T_POS2,$$T_POS2,-33),DELTA=$$IF(IN_DLT,$$IN_DLT,0.5),MOVER=$$Y.VAL,RBV=$$Y.RBV,DMOV=$$Y.DMOV" )
dbLoadRecords( "$(TOP)/db/one_state.db", "DEVICE=$$NAME:Y,STATE=$$IF(T3,$$T3,TARGET3),SET=$$IF(T_POS3,$$T_POS3,-21),DELTA=$$IF(IN_DLT,$$IN_DLT,0.5),MOVER=$$Y.VAL,RBV=$$Y.RBV,DMOV=$$Y.DMOV" )
dbLoadRecords( "$(TOP)/db/one_state.db", "DEVICE=$$NAME:Y,STATE=$$IF(T4,$$T4,TARGET4),SET=$$IF(T_POS4,$$T_POS4,-11),DELTA=$$IF(IN_DLT,$$IN_DLT,0.5),MOVER=$$Y.VAL,RBV=$$Y.RBV,DMOV=$$Y.DMOV" )
dbLoadRecords( "$(TOP)/db/one_state.db", "DEVICE=$$NAME:Y,STATE=$$IF(T5,$$T5,TARGET5),SET=$$IF(T_POS5,$$T_POS5,0),DELTA=$$IF(IN_DLT,$$IN_DLT,0.5),MOVER=$$Y.VAL,RBV=$$Y.RBV,DMOV=$$Y.DMOV" )
dbLoadRecords( "$(TOP)/db/one_state.db", "DEVICE=$$NAME:Y,STATE=$$IF(T6,$$T6,TARGET6),SET=$$IF(T_POS6,$$T_POS6,12),DELTA=$$IF(IN_DLT,$$IN_DLT,0.5),MOVER=$$Y.VAL,RBV=$$Y.RBV,DMOV=$$Y.DMOV" )
dbLoadRecords( "$(TOP)/db/one_state.db", "DEVICE=$$NAME:Y,STATE=$$IF(T7,$$T7,TARGET7),SET=$$IF(T_POS7,$$T_POS7,24),DELTA=$$IF(IN_DLT,$$IN_DLT,0.5),MOVER=$$Y.VAL,RBV=$$Y.RBV,DMOV=$$Y.DMOV" )
$$IF(T8)
dbLoadRecords( "$(TOP)/db/one_state.db", "DEVICE=$$NAME:Y,STATE=$$T8,SET=$$IF(T_POS8,$$T_POS8,36),DELTA=$$IF(IN_DLT,$$IN_DLT,0.5),MOVER=$$Y.VAL,RBV=$$Y.RBV,DMOV=$$Y.DMOV" )
dbLoadRecords( "$(TOP)/db/device_with_9states.db", "DEVICE=$$NAME:Y,STATE1=$$IF(T1,$$T1,TARGET1),SEVR1=$$IF(SEVR1,$$SEVR1,MINOR),STATE2=$$IF(T2,$$T2,TARGET2),SEVR2=$$IF(SEVR2,$$SEVR2,MINOR),STATE3=$$IF(T3,$$T3,TARGET3),SEVR3=$$IF(SEVR3,$$SEVR3,MINOR),STATE4=$$IF(T4,$$T4,TARGET4),SEVR4=$$IF(SEVR4,$$SEVR4,MINOR),STATE5=$$IF(T5,$$T5,TARGET5),SEVR5=$$IF(SEVR5,$$SEVR5,MINOR),STATE6=$$IF(T6,$$T6,TARGET6),SEVR6=$$IF(SEVR6,$$SEVR6,MINOR),STATE7=$$IF(T7,$$T7,TARGET7),SEVR7=$$IF(SEVR7,$$SEVR7,MINOR),STATE8=$$T8,SEVR8=$$IF(SEVR8,$$SEVR8,MINOR),STATE9=OUT,SEVR9=NO_ALARM" )
$$ELSE(T8)
dbLoadRecords( "$(TOP)/db/device_with_8states.db", "DEVICE=$$NAME:Y,STATE1=$$IF(T1,$$T1,TARGET1),SEVR1=$$IF(SEVR1,$$SEVR1,MINOR),STATE2=$$IF(T2,$$T2,TARGET2),SEVR2=$$IF(SEVR2,$$SEVR2,MINOR),STATE3=$$IF(T3,$$T3,TARGET3),SEVR3=$$IF(SEVR3,$$SEVR3,MINOR),STATE4=$$IF(T4,$$T4,TARGET4),SEVR4=$$IF(SEVR4,$$SEVR4,MINOR),STATE5=$$IF(T5,$$T5,TARGET5),SEVR5=$$IF(SEVR5,$$SEVR5,MINOR),STATE6=$$IF(T6,$$T6,TARGET6),SEVR6=$$IF(SEVR6,$$SEVR6,MINOR),STATE7=$$IF(T7,$$T7,TARGET7),SEVR7=$$IF(SEVR7,$$SEVR7,MINOR),STATE8=OUT,SEVR8=NO_ALARM" )
$$ENDIF(T8)
dbLoadRecords( "$(TOP)/db/alias.db", "SOURCE=$$Y,ALIAS=$$NAME:Y:MOTOR" )

dbLoadRecords( "$(TOP)/db/one_state.db", "DEVICE=$$NAME:X,STATE=OUT,SET=$$IF(OUT_POS,$$OUT_POS,0),DELTA=$$IF(OUT_DLT_X,$$OUT_DLT_X,0.5),MOVER=$$X.VAL,RBV=$$X.RBV,DMOV=$$X.DMOV" )
dbLoadRecords( "$(TOP)/db/one_state.db", "DEVICE=$$NAME:X,STATE=$$IF(T1,$$T1,TARGET1),SET=$$IF(T_POS1_X,$$T_POS1_X,0),DELTA=$$IF(IN_DLT_X,$$IN_DLT_X,0.05),MOVER=$$X.VAL,RBV=$$X.RBV,DMOV=$$X.DMOV" )
dbLoadRecords( "$(TOP)/db/one_state.db", "DEVICE=$$NAME:X,STATE=$$IF(T2,$$T2,TARGET2),SET=$$IF(T_POS2_X,$$T_POS2_X,0),DELTA=$$IF(IN_DLT_X,$$IN_DLT_X,0.05),MOVER=$$X.VAL,RBV=$$X.RBV,DMOV=$$X.DMOV" )
dbLoadRecords( "$(TOP)/db/one_state.db", "DEVICE=$$NAME:X,STATE=$$IF(T3,$$T3,TARGET3),SET=$$IF(T_POS3_X,$$T_POS3_X,0),DELTA=$$IF(IN_DLT_X,$$IN_DLT_X,0.05),MOVER=$$X.VAL,RBV=$$X.RBV,DMOV=$$X.DMOV" )
dbLoadRecords( "$(TOP)/db/one_state.db", "DEVICE=$$NAME:X,STATE=$$IF(T4,$$T4,TARGET4),SET=$$IF(T_POS4_X,$$T_POS4_X,0),DELTA=$$IF(IN_DLT_X,$$IN_DLT_X,0.05),MOVER=$$X.VAL,RBV=$$X.RBV,DMOV=$$X.DMOV" )
dbLoadRecords( "$(TOP)/db/one_state.db", "DEVICE=$$NAME:X,STATE=$$IF(T5,$$T5,TARGET5),SET=$$IF(T_POS5_X,$$T_POS5_X,0),DELTA=$$IF(IN_DLT_X,$$IN_DLT_X,0.05),MOVER=$$X.VAL,RBV=$$X.RBV,DMOV=$$X.DMOV" )
dbLoadRecords( "$(TOP)/db/one_state.db", "DEVICE=$$NAME:X,STATE=$$IF(T6,$$T6,TARGET6),SET=$$IF(T_POS6_X,$$T_POS6_X,0),DELTA=$$IF(IN_DLT_X,$$IN_DLT_X,0.05),MOVER=$$X.VAL,RBV=$$X.RBV,DMOV=$$X.DMOV" )
dbLoadRecords( "$(TOP)/db/one_state.db", "DEVICE=$$NAME:X,STATE=$$IF(T7,$$T7,TARGET7),SET=$$IF(T_POS7_X,$$T_POS7_X,0),DELTA=$$IF(IN_DLT_X,$$IN_DLT_X,0.05),MOVER=$$X.VAL,RBV=$$X.RBV,DMOV=$$X.DMOV" )
$$IF(T8)
dbLoadRecords( "$(TOP)/db/one_state.db", "DEVICE=$$NAME:X,STATE=$$T8,SET=$$IF(T_POS8_X,$$T_POS8_X,0),DELTA=$$IF(IN_DLT_X,$$IN_DLT_X,0.05),MOVER=$$X.VAL,RBV=$$X.RBV,DMOV=$$X.DMOV" )
dbLoadRecords( "$(TOP)/db/device_with_9states.db", "DEVICE=$$NAME:X,STATE1=$$IF(T1,$$T1,TARGET1),SEVR1=$$IF(SEVR1,$$SEVR1,MINOR),STATE2=$$IF(T2,$$T2,TARGET2),SEVR2=$$IF(SEVR2,$$SEVR2,MINOR),STATE3=$$IF(T3,$$T3,TARGET3),SEVR3=$$IF(SEVR3,$$SEVR3,MINOR),STATE4=$$IF(T4,$$T4,TARGET4),SEVR4=$$IF(SEVR4,$$SEVR4,MINOR),STATE5=$$IF(T5,$$T5,TARGET5),SEVR5=$$IF(SEVR5,$$SEVR5,MINOR),STATE6=$$IF(T6,$$T6,TARGET6),SEVR6=$$IF(SEVR6,$$SEVR6,MINOR),STATE7=$$IF(T7,$$T7,TARGET7),SEVR7=$$IF(SEVR7,$$SEVR7,MINOR),STATE8=$$T8,SEVR8=$$IF(SEVR8,$$SEVR8,MINOR),STATE9=OUT,SEVR9=NO_ALARM" )
$$ELSE(T8)
dbLoadRecords( "$(TOP)/db/device_with_8states.db", "DEVICE=$$NAME:X,STATE1=$$IF(T1,$$T1,TARGET1),SEVR1=$$IF(SEVR1,$$SEVR1,MINOR),STATE2=$$IF(T2,$$T2,TARGET2),SEVR2=$$IF(SEVR2,$$SEVR2,MINOR),STATE3=$$IF(T3,$$T3,TARGET3),SEVR3=$$IF(SEVR3,$$SEVR3,MINOR),STATE4=$$IF(T4,$$T4,TARGET4),SEVR4=$$IF(SEVR4,$$SEVR4,MINOR),STATE5=$$IF(T5,$$T5,TARGET5),SEVR5=$$IF(SEVR5,$$SEVR5,MINOR),STATE6=$$IF(T6,$$T6,TARGET6),SEVR6=$$IF(SEVR6,$$SEVR6,MINOR),STATE7=$$IF(T7,$$T7,TARGET7),SEVR7=$$IF(SEVR7,$$SEVR7,MINOR),STATE8=OUT,SEVR8=NO_ALARM" )
$$ENDIF(T8)
dbLoadRecords( "$(TOP)/db/alias.db", "SOURCE=$$X,ALIAS=$$NAME:X:MOTOR" )

dbLoadRecords( "$(TOP)/db/state_with_2components.db", "DEVICE=$$NAME,STATE=OUT,COMP1=$$NAME:Y,COMP2=$$NAME:X" )
dbLoadRecords( "$(TOP)/db/state_with_2components.db", "DEVICE=$$NAME,STATE=$$IF(T1,$$T1,TARGET1),COMP1=$$NAME:Y,COMP2=$$NAME:X" )
dbLoadRecords( "$(TOP)/db/state_with_2components.db", "DEVICE=$$NAME,STATE=$$IF(T2,$$T2,TARGET2),COMP1=$$NAME:Y,COMP2=$$NAME:X" )
dbLoadRecords( "$(TOP)/db/state_with_2components.db", "DEVICE=$$NAME,STATE=$$IF(T3,$$T3,TARGET3),COMP1=$$NAME:Y,COMP2=$$NAME:X" )
dbLoadRecords( "$(TOP)/db/state_with_2components.db", "DEVICE=$$NAME,STATE=$$IF(T4,$$T4,TARGET4),COMP1=$$NAME:Y,COMP2=$$NAME:X" )
dbLoadRecords( "$(TOP)/db/state_with_2components.db", "DEVICE=$$NAME,STATE=$$IF(T5,$$T5,TARGET5),COMP1=$$NAME:Y,COMP2=$$NAME:X" )
dbLoadRecords( "$(TOP)/db/state_with_2components.db", "DEVICE=$$NAME,STATE=$$IF(T6,$$T6,TARGET6),COMP1=$$NAME:Y,COMP2=$$NAME:X" )
dbLoadRecords( "$(TOP)/db/state_with_2components.db", "DEVICE=$$NAME,STATE=$$IF(T7,$$T7,TARGET7),COMP1=$$NAME:Y,COMP2=$$NAME:X" )
$$IF(T8)
dbLoadRecords( "$(TOP)/db/state_with_2components.db", "DEVICE=$$NAME,STATE=$$T8,COMP1=$$NAME:Y,COMP2=$$NAME:X" )
dbLoadRecords( "$(TOP)/db/device_with_9states.db", "DEVICE=$$NAME,STATE1=$$IF(T1,$$T1,TARGET1),SEVR1=$$IF(SEVR1,$$SEVR1,MINOR),STATE2=$$IF(T2,$$T2,TARGET2),SEVR2=$$IF(SEVR2,$$SEVR2,MINOR),STATE3=$$IF(T3,$$T3,TARGET3),SEVR3=$$IF(SEVR3,$$SEVR3,MINOR),STATE4=$$IF(T4,$$T4,TARGET4),SEVR4=$$IF(SEVR4,$$SEVR4,MINOR),STATE5=$$IF(T5,$$T5,TARGET5),SEVR5=$$IF(SEVR5,$$SEVR5,MINOR),STATE6=$$IF(T6,$$T6,TARGET6),SEVR6=$$IF(SEVR6,$$SEVR6,MINOR),STATE7=$$IF(T7,$$T7,TARGET7),SEVR7=$$IF(SEVR7,$$SEVR7,MINOR),STATE8=$$T8,SEVR8=$$IF(SEVR8,$$SEVR8,MINOR),STATE9=OUT,SEVR9=NO_ALARM" )
$$ELSE(T8)
dbLoadRecords( "$(TOP)/db/device_with_8states.db", "DEVICE=$$NAME,STATE1=$$IF(T1,$$T1,TARGET1),SEVR1=$$IF(SEVR1,$$SEVR1,MINOR),STATE2=$$IF(T2,$$T2,TARGET2),SEVR2=$$IF(SEVR2,$$SEVR2,MINOR),STATE3=$$IF(T3,$$T3,TARGET3),SEVR3=$$IF(SEVR3,$$SEVR3,MINOR),STATE4=$$IF(T4,$$T4,TARGET4),SEVR4=$$IF(SEVR4,$$SEVR4,MINOR),STATE5=$$IF(T5,$$T5,TARGET5),SEVR5=$$IF(SEVR5,$$SEVR5,MINOR),STATE6=$$IF(T6,$$T6,TARGET6),SEVR6=$$IF(SEVR6,$$SEVR6,MINOR),STATE7=$$IF(T7,$$T7,TARGET7),SEVR7=$$IF(SEVR7,$$SEVR7,MINOR),STATE8=OUT,SEVR8=NO_ALARM" )
$$ENDIF(T8)

$$IF(ZOOM)
dbLoadRecords( "$(TOP)/db/ims_short.db", "IOC=$(EPICS_NAME),MOTOR=$$ZOOM,PORT=$$ZOOM_PORT,ASYN=$$IF(ZOOM_ASYN,$$ZOOM_ASYN,$$ZOOM),DVER=$(DVER),ERBL=$$ZOOM_ERBL" )
dbLoadRecords( "$(TOP)/db/alias.db", "SOURCE=$$ZOOM,ALIAS=$$NAME:ZOOM_MOTOR" )
dbLoadRecords( "$(TOP)/db/zoom_lens.db", "NAME=$$NAME,IN=$$ZOOM.RBV CPP,OUT=$$ZOOM.VAL CPP,NMAX=$$IF(ZOOM_NMAX,$$ZOOM_NMAX,64)" )
$$ENDIF(ZOOM)
$$IF(FOCUS)
dbLoadRecords( "$(TOP)/db/ims_short.db", "IOC=$(EPICS_NAME),MOTOR=$$FOCUS,PORT=$$FOCUS_PORT,ASYN=$$IF(FOCUS_ASYN,$$FOCUS_ASYN,$$FOCUS),DVER=$(DVER),ERBL=$$FOCUS_ERBL" )
dbLoadRecords( "$(TOP)/db/alias.db", "SOURCE=$$FOCUS,ALIAS=$$NAME:FOCUS_MOTOR" )
$$ENDIF(FOCUS)
$$ENDLOOP(TT)

$$LOOP(SLIT)
dbLoadRecords( "$(TOP)/db/ims_short.db", "IOC=$(EPICS_NAME),MOTOR=$$LEFT,PORT=$$LEFT_PORT,ASYN=$$IF(LEFT_ASYN,$$LEFT_ASYN,$$LEFT),DVER=$(DVER),ERBL=$$LEFT_ERBL" )
dbLoadRecords( "$(TOP)/db/ims_short.db", "IOC=$(EPICS_NAME),MOTOR=$$RIGHT,PORT=$$RIGHT_PORT,ASYN=$$IF(RIGHT_ASYN,$$RIGHT_ASYN,$$RIGHT),DVER=$(DVER),ERBL=$$RIGHT_ERBL" )
dbLoadRecords( "$(TOP)/db/ims_short.db", "IOC=$(EPICS_NAME),MOTOR=$$TOP,PORT=$$TOP_PORT,ASYN=$$IF(TOP_ASYN,$$TOP_ASYN,$$TOP),DVER=$(DVER),ERBL=$$TOP_ERBL" )
dbLoadRecords( "$(TOP)/db/ims_short.db", "IOC=$(EPICS_NAME),MOTOR=$$BOTTOM,PORT=$$BOTTOM_PORT,ASYN=$$IF(BOTTOM_ASYN,$$BOTTOM_ASYN,$$BOTTOM),DVER=$(DVER),ERBL=$$BOTTOM_ERBL" )
dbLoadRecords( "$(TOP)/db/slit_4jaw.db", "NAME=$$NAME,M_LFT=$$LEFT,M_RHT=$$RIGHT,M_TOP=$$TOP,M_BOT=$$BOTTOM,HALFX=$$IF(HALFX,$$HALFX,22.5),HALFY=$$IF(HALFY,$$HALFY,22.5)" )
$$ENDLOOP(SLIT)

$$LOOP(REFL)
dbLoadRecords( "$(TOP)/db/ims_short.db", "IOC=$(EPICS_NAME),MOTOR=$$MIRROR,PORT=$$PORT,ASYN=$$IF(ASYN,$$ASYN,$$MIRROR),DVER=$(DVER),ERBL=$$ERBL" )
dbLoadRecords( "$(TOP)/db/one_state.db", "DEVICE=$$NAME:MIRROR,STATE=IN,SET=$$IF(IN_POS,$$IN_POS,50),DELTA=$$IF(IN_DLT,$$IN_DLT,0.5),MOVER=$$MIRROR.VAL,RBV=$$MIRROR.RBV,DMOV=$$MIRROR.DMOV" )
dbLoadRecords( "$(TOP)/db/one_state.db", "DEVICE=$$NAME:MIRROR,STATE=OUT,SET=$$IF(OUT_POS,$$OUT_POS,0),DELTA=$$IF(OUT_DLT,$$OUT_DLT,5.0),MOVER=$$MIRROR.VAL,RBV=$$MIRROR.RBV,DMOV=$$MIRROR.DMOV" )
dbLoadRecords( "$(TOP)/db/device_with_2states.db", "DEVICE=$$NAME:MIRROR,STATE1=IN,SEVR1=$$IF(IN_SEVR,$$IN_SEVR,MINOR),STATE2=OUT,SEVR2=$$IF(OUT_SEVR,$$OUT_SEVR,NO_ALARM)" )
dbLoadRecords( "$(TOP)/db/alias.db", "SOURCE=$$MIRROR,ALIAS=$$NAME:MIRROR:MOTOR" )
$$ENDLOOP(REFL)

$$LOOP(CCM)
dbLoadRecords( "$(TOP)/db/ims_short.db", "IOC=$(EPICS_NAME),MOTOR=$$X1,PORT=$$X1_PORT,ASYN=$$IF(X1_ASYN,$$X1_ASYN,$$X1),DVER=$(DVER),ERBL=$$X1_ERBL" )
dbLoadRecords( "$(TOP)/db/one_state.db", "DEVICE=$$NAME:X1,STATE=IN,SET=$$IN_POS_X1,DELTA=$$IF(IN_DLT,$$IN_DLT,0.5),MOVER=$$X1.VAL,RBV=$$X1.RBV,DMOV=$$X1.DMOV" )
dbLoadRecords( "$(TOP)/db/one_state.db", "DEVICE=$$NAME:X1,STATE=OUT,SET=$$OUT_POS_X1,DELTA=$$IF(OUT_DLT,$$OUT_DLT,0.5),MOVER=$$X1.VAL,RBV=$$X1.RBV,DMOV=$$X1.DMOV" )
dbLoadRecords( "$(TOP)/db/device_with_2states.db", "DEVICE=$$NAME:X1,STATE1=IN,SEVR1=$$IF(IN_SEVR,$$IN_SEVR,MINOR),STATE2=OUT,SEVR2=$$IF(OUT_SEVR,$$OUT_SEVR,NO_ALARM)" )
dbLoadRecords( "$(TOP)/db/alias.db", "SOURCE=$$X1,ALIAS=$$NAME:X1:MOTOR" )

dbLoadRecords( "$(TOP)/db/ims_short.db", "IOC=$(EPICS_NAME),MOTOR=$$X2,PORT=$$X2_PORT,ASYN=$$IF(X2_ASYN,$$X2_ASYN,$$X2),DVER=$(DVER),ERBL=$$X2_ERBL" )
dbLoadRecords( "$(TOP)/db/one_state.db", "DEVICE=$$NAME:X2,STATE=IN,SET=$$IN_POS_X2,DELTA=$$IF(IN_DLT,$$IN_DLT,0.5),MOVER=$$X2.VAL,RBV=$$X2.RBV,DMOV=$$X2.DMOV" )
dbLoadRecords( "$(TOP)/db/one_state.db", "DEVICE=$$NAME:X2,STATE=OUT,SET=$$OUT_POS_X2,DELTA=$$IF(OUT_DLT,$$OUT_DLT,0.5),MOVER=$$X2.VAL,RBV=$$X2.RBV,DMOV=$$X2.DMOV" )
dbLoadRecords( "$(TOP)/db/device_with_2states.db", "DEVICE=$$NAME:X2,STATE1=IN,SEVR1=$$IF(IN_SEVR,$$IN_SEVR,MINOR),STATE2=OUT,SEVR2=$$IF(OUT_SEVR,$$OUT_SEVR,NO_ALARM)" )
dbLoadRecords( "$(TOP)/db/alias.db", "SOURCE=$$X2,ALIAS=$$NAME:X2:MOTOR" )

dbLoadRecords( "$(TOP)/db/state_with_2components.db", "DEVICE=$$NAME,STATE=IN,COMP1=$$NAME:X1,COMP2=$$NAME:X2" )
dbLoadRecords( "$(TOP)/db/state_with_2components.db", "DEVICE=$$NAME,STATE=OUT,COMP1=$$NAME:X1,COMP2=$$NAME:X2" )
dbLoadRecords( "$(TOP)/db/device_with_2states.db", "DEVICE=$$NAME,STATE1=IN,SEVR1=$$IF(IN_SEVR,$$IN_SEVR,MINOR),STATE2=OUT,SEVR2=$$IF(OUT_SEVR,$$OUT_SEVR,NO_ALARM)" )

dbLoadRecords( "$(TOP)/db/ims_short.db", "IOC=$(EPICS_NAME),MOTOR=$$Y1,PORT=$$Y1_PORT,ASYN=$$IF(Y1_ASYN,$$Y1_ASYN,$$Y1),DVER=$(DVER),ERBL=$$Y1_ERBL" )
dbLoadRecords( "$(TOP)/db/ims_short.db", "IOC=$(EPICS_NAME),MOTOR=$$Y2,PORT=$$Y2_PORT,ASYN=$$IF(Y2_ASYN,$$Y2_ASYN,$$Y2),DVER=$(DVER),ERBL=$$Y2_ERBL" )
dbLoadRecords( "$(TOP)/db/ims_short.db", "IOC=$(EPICS_NAME),MOTOR=$$Y3,PORT=$$Y3_PORT,ASYN=$$IF(Y3_ASYN,$$Y3_ASYN,$$Y3),DVER=$(DVER),ERBL=$$Y3_ERBL" )
$$ENDLOOP(CCM)

$$LOOP(INOUT)
dbLoadRecords( "$(TOP)/db/ims_short.db", "IOC=$(EPICS_NAME),MOTOR=$$MOTOR,PORT=$$PORT,ASYN=$$IF(ASYN,$$ASYN,$$MOTOR),DVER=$(DVER),ERBL=$$ERBL" )
dbLoadRecords( "$(TOP)/db/one_state.db", "DEVICE=$$NAME,STATE=IN,SET=$$IN_POS,DELTA=$$IF(IN_DLT,$$IN_DLT,0.5),MOVER=$$MOTOR.VAL,RBV=$$MOTOR.RBV,DMOV=$$MOTOR.DMOV" )
dbLoadRecords( "$(TOP)/db/one_state.db", "DEVICE=$$NAME,STATE=OUT,SET=$$OUT_POS,DELTA=$$IF(OUT_DLT,$$OUT_DLT,5.0),MOVER=$$MOTOR.VAL,RBV=$$MOTOR.RBV,DMOV=$$MOTOR.DMOV" )
dbLoadRecords( "$(TOP)/db/device_with_2states.db", "DEVICE=$$NAME,STATE1=IN,SEVR1=$$IF(IN_SEVR,$$IN_SEVR,MINOR),STATE2=OUT,SEVR2=$$IF(OUT_SEVR,$$OUT_SEVR,NO_ALARM)" )
dbLoadRecords( "$(TOP)/db/alias.db", "SOURCE=$$MOTOR,ALIAS=$$NAME:MOTOR" )
$$ENDLOOP(INOUT)

$$LOOP(MOTOR)
dbLoadRecords( "$(TOP)/db/ims_short.db", "IOC=$(EPICS_NAME),MOTOR=$$NAME,PORT=$$PORT,ASYN=$$IF(ASYN,$$ASYN,$$NAME),DVER=$(DVER),ERBL=$$ERBL" )
$$ENDLOOP(MOTOR)

$$LOOP(LKUP)
dbLoadRecords( "$(TOP)/db/lkup.db", "NAME=$$NAME,IN=$$IN,OUT=$$OUT,NMAX=$$NMAX" )
$$ENDLOOP(LKUP)

$$LOOP(STATES)
dbLoadRecords( "$(TOP)/db/one_state.db", "DEVICE=$$DEVICE,STATE=$$STATE1,SET=$$IF(POS1,$$POS1,0),DELTA=$$IF(DELTA1,$$DELTA1,0.5),MOVER=$$MOTOR.VAL,RBV=$$IF(RBV,$$RBV,$$MOTOR.RBV),DMOV=$$IF(DMOV,$$DMOV,$$MOTOR.DMOV)" )
$$IF(STATE2)
dbLoadRecords( "$(TOP)/db/one_state.db", "DEVICE=$$DEVICE,STATE=$$STATE2,SET=$$IF(POS2,$$POS2,0),DELTA=$$IF(DELTA2,$$DELTA2,0.5),MOVER=$$MOTOR.VAL,RBV=$$IF(RBV,$$RBV,$$MOTOR.RBV),DMOV=$$IF(DMOV,$$DMOV,$$MOTOR.DMOV)" )
$$ENDIF(STATE2)
$$IF(STATE3)
dbLoadRecords( "$(TOP)/db/one_state.db", "DEVICE=$$DEVICE,STATE=$$STATE3,SET=$$IF(POS3,$$POS3,0),DELTA=$$IF(DELTA3,$$DELTA3,0.5),MOVER=$$MOTOR.VAL,RBV=$$IF(RBV,$$RBV,$$MOTOR.RBV),DMOV=$$IF(DMOV,$$DMOV,$$MOTOR.DMOV)" )
$$ENDIF(STATE3)
$$IF(STATE4)
dbLoadRecords( "$(TOP)/db/one_state.db", "DEVICE=$$DEVICE,STATE=$$STATE4,SET=$$IF(POS4,$$POS4,0),DELTA=$$IF(DELTA4,$$DELTA4,0.5),MOVER=$$MOTOR.VAL,RBV=$$IF(RBV,$$RBV,$$MOTOR.RBV),DMOV=$$IF(DMOV,$$DMOV,$$MOTOR.DMOV)" )
$$ENDIF(STATE4)
$$IF(STATE5)
dbLoadRecords( "$(TOP)/db/one_state.db", "DEVICE=$$DEVICE,STATE=$$STATE5,SET=$$IF(POS5,$$POS5,0),DELTA=$$IF(DELTA5,$$DELTA5,0.5),MOVER=$$MOTOR.VAL,RBV=$$IF(RBV,$$RBV,$$MOTOR.RBV),DMOV=$$IF(DMOV,$$DMOV,$$MOTOR.DMOV)" )
$$ENDIF(STATE5)
$$IF(STATE6)
dbLoadRecords( "$(TOP)/db/one_state.db", "DEVICE=$$DEVICE,STATE=$$STATE6,SET=$$IF(POS6,$$POS6,0),DELTA=$$IF(DELTA6,$$DELTA6,0.5),MOVER=$$MOTOR.VAL,RBV=$$IF(RBV,$$RBV,$$MOTOR.RBV),DMOV=$$IF(DMOV,$$DMOV,$$MOTOR.DMOV)" )
$$ENDIF(STATE6)
$$IF(STATE7)
dbLoadRecords( "$(TOP)/db/one_state.db", "DEVICE=$$DEVICE,STATE=$$STATE7,SET=$$IF(POS7,$$POS7,0),DELTA=$$IF(DELTA7,$$DELTA7,0.5),MOVER=$$MOTOR.VAL,RBV=$$IF(RBV,$$RBV,$$MOTOR.RBV),DMOV=$$IF(DMOV,$$DMOV,$$MOTOR.DMOV)" )
$$ENDIF(STATE7)
$$IF(STATE8)
dbLoadRecords( "$(TOP)/db/one_state.db", "DEVICE=$$DEVICE,STATE=$$STATE8,SET=$$IF(POS8,$$POS8,0),DELTA=$$IF(DELTA8,$$DELTA8,0.5),MOVER=$$MOTOR.VAL,RBV=$$IF(RBV,$$RBV,$$MOTOR.RBV),DMOV=$$IF(DMOV,$$DMOV,$$MOTOR.DMOV)" )
$$ENDIF(STATE8)
$$IF(STATE9)
dbLoadRecords( "$(TOP)/db/one_state.db", "DEVICE=$$DEVICE,STATE=$$STATE9,SET=$$IF(POS9,$$POS9,0),DELTA=$$IF(DELTA9,$$DELTA9,0.5),MOVER=$$MOTOR.VAL,RBV=$$IF(RBV,$$RBV,$$MOTOR.RBV),DMOV=$$IF(DMOV,$$DMOV,$$MOTOR.DMOV)" )
dbLoadRecords( "$(TOP)/db/device_with_9states.db", "DEVICE=$$DEVICE,STATE1=$$STATE1,SEVR1=$$IF(SEVR1,$$SEVR1,NO_ALARM),STATE2=$$STATE2,SEVR2=$$IF(SEVR2,$$SEVR2,NO_ALARM),STATE3=$$STATE3,SEVR3=$$IF(SEVR3,$$SEVR3,NO_ALARM),STATE4=$$STATE4,SEVR4=$$IF(SEVR4,$$SEVR4,NO_ALARM),STATE5=$$STATE5,SEVR5=$$IF(SEVR5,$$SEVR5,NO_ALARM),STATE6=$$STATE6,SEVR6=$$IF(SEVR6,$$SEVR6,NO_ALARM),STATE7=$$STATE7,SEVR7=$$IF(SEVR7,$$SEVR7,NO_ALARM),STATE8=$$STATE8,SEVR8=$$IF(SEVR8,$$SEVR8,NO_ALARM),STATE9=$$STATE9,SEVR9=$$IF(SEVR9,$$SEVR9,NO_ALARM)" )
$$ELSE(STATE9)
$$IF(STATE8)
dbLoadRecords( "$(TOP)/db/device_with_8states.db", "DEVICE=$$DEVICE,STATE1=$$STATE1,SEVR1=$$IF(SEVR1,$$SEVR1,NO_ALARM),STATE2=$$STATE2,SEVR2=$$IF(SEVR2,$$SEVR2,NO_ALARM),STATE3=$$STATE3,SEVR3=$$IF(SEVR3,$$SEVR3,NO_ALARM),STATE4=$$STATE4,SEVR4=$$IF(SEVR4,$$SEVR4,NO_ALARM),STATE5=$$STATE5,SEVR5=$$IF(SEVR5,$$SEVR5,NO_ALARM),STATE6=$$STATE6,SEVR6=$$IF(SEVR6,$$SEVR6,NO_ALARM),STATE7=$$STATE7,SEVR7=$$IF(SEVR7,$$SEVR7,NO_ALARM),STATE8=$$STATE8,SEVR8=$$IF(SEVR8,$$SEVR8,NO_ALARM)" )
$$ELSE(STATE8)
$$IF(STATE7)
dbLoadRecords( "$(TOP)/db/device_with_7states.db", "DEVICE=$$DEVICE,STATE1=$$STATE1,SEVR1=$$IF(SEVR1,$$SEVR1,NO_ALARM),STATE2=$$STATE2,SEVR2=$$IF(SEVR2,$$SEVR2,NO_ALARM),STATE3=$$STATE3,SEVR3=$$IF(SEVR3,$$SEVR3,NO_ALARM),STATE4=$$STATE4,SEVR4=$$IF(SEVR4,$$SEVR4,NO_ALARM),STATE5=$$STATE5,SEVR5=$$IF(SEVR5,$$SEVR5,NO_ALARM),STATE6=$$STATE6,SEVR6=$$IF(SEVR6,$$SEVR6,NO_ALARM),STATE7=$$STATE7,SEVR7=$$IF(SEVR7,$$SEVR7,NO_ALARM)" )
$$ELSE(STATE7)
$$IF(STATE6)
dbLoadRecords( "$(TOP)/db/device_with_6states.db", "DEVICE=$$DEVICE,STATE1=$$STATE1,SEVR1=$$IF(SEVR1,$$SEVR1,NO_ALARM),STATE2=$$STATE2,SEVR2=$$IF(SEVR2,$$SEVR2,NO_ALARM),STATE3=$$STATE3,SEVR3=$$IF(SEVR3,$$SEVR3,NO_ALARM),STATE4=$$STATE4,SEVR4=$$IF(SEVR4,$$SEVR4,NO_ALARM),STATE5=$$STATE5,SEVR5=$$IF(SEVR5,$$SEVR5,NO_ALARM),STATE6=$$STATE6,SEVR6=$$IF(SEVR6,$$SEVR6,NO_ALARM)" )
$$ELSE(STATE6)
$$IF(STATE5)
dbLoadRecords( "$(TOP)/db/device_with_5states.db", "DEVICE=$$DEVICE,STATE1=$$STATE1,SEVR1=$$IF(SEVR1,$$SEVR1,NO_ALARM),STATE2=$$STATE2,SEVR2=$$IF(SEVR2,$$SEVR2,NO_ALARM),STATE3=$$STATE3,SEVR3=$$IF(SEVR3,$$SEVR3,NO_ALARM),STATE4=$$STATE4,SEVR4=$$IF(SEVR4,$$SEVR4,NO_ALARM),STATE5=$$STATE5,SEVR5=$$IF(SEVR5,$$SEVR5,NO_ALARM)" )
$$ELSE(STATE5)
$$IF(STATE4)
dbLoadRecords( "$(TOP)/db/device_with_4states.db", "DEVICE=$$DEVICE,STATE1=$$STATE1,SEVR1=$$IF(SEVR1,$$SEVR1,NO_ALARM),STATE2=$$STATE2,SEVR2=$$IF(SEVR2,$$SEVR2,NO_ALARM),STATE3=$$STATE3,SEVR3=$$IF(SEVR3,$$SEVR3,NO_ALARM),STATE4=$$STATE4,SEVR4=$$IF(SEVR4,$$SEVR4,NO_ALARM)" )
$$ELSE(STATE4)
$$IF(STATE3)
dbLoadRecords( "$(TOP)/db/device_with_3states.db", "DEVICE=$$DEVICE,STATE1=$$STATE1,SEVR1=$$IF(SEVR1,$$SEVR1,NO_ALARM),STATE2=$$STATE2,SEVR2=$$IF(SEVR2,$$SEVR2,NO_ALARM),STATE3=$$STATE3,SEVR3=$$IF(SEVR3,$$SEVR3,NO_ALARM)" )
$$ELSE(STATE3)
$$IF(STATE2)
dbLoadRecords( "$(TOP)/db/device_with_2states.db", "DEVICE=$$DEVICE,STATE1=$$STATE1,SEVR1=$$IF(SEVR1,$$SEVR1,NO_ALARM),STATE2=$$STATE2,SEVR2=$$IF(SEVR2,$$SEVR2,NO_ALARM)" )
$$ENDIF(STATE2)
$$ENDIF(STATE3)
$$ENDIF(STATE4)
$$ENDIF(STATE5)
$$ENDIF(STATE6)
$$ENDIF(STATE7)
$$ENDIF(STATE8)
$$ENDIF(STATE9)
dbLoadRecords( "$(TOP)/db/alias.db", "SOURCE=$$MOTOR,ALIAS=$$DEVICE:MOTOR" )
$$ENDLOOP(STATES)

$$LOOP(COMBINE)
$$IF(COMP9)
dbLoadRecords( "$(TOP)/db/state_with_9components.db", "DEVICE=$$DEVICE,STATE=$$STATE1,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6,COMP7=$$COMP7,COMP8=$$COMP8,COMP9=$$COMP9" )
$$ELSE(COMP9)
$$IF(COMP8)
dbLoadRecords( "$(TOP)/db/state_with_8components.db", "DEVICE=$$DEVICE,STATE=$$STATE1,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6,COMP7=$$COMP7,COMP8=$$COMP8" )
$$ELSE(COMP8)
$$IF(COMP7)
dbLoadRecords( "$(TOP)/db/state_with_7components.db", "DEVICE=$$DEVICE,STATE=$$STATE1,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6,COMP7=$$COMP7" )
$$ELSE(COMP7)
$$IF(COMP6)
dbLoadRecords( "$(TOP)/db/state_with_6components.db", "DEVICE=$$DEVICE,STATE=$$STATE1,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6" )
$$ELSE(COMP6)
$$IF(COMP5)
dbLoadRecords( "$(TOP)/db/state_with_5components.db", "DEVICE=$$DEVICE,STATE=$$STATE1,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5" )
$$ELSE(COMP5)
$$IF(COMP4)
dbLoadRecords( "$(TOP)/db/state_with_4components.db", "DEVICE=$$DEVICE,STATE=$$STATE1,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4" )
$$ELSE(COMP4)
$$IF(COMP3)
dbLoadRecords( "$(TOP)/db/state_with_3components.db", "DEVICE=$$DEVICE,STATE=$$STATE1,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3" )
$$ELSE(COMP3)
dbLoadRecords( "$(TOP)/db/state_with_2components.db", "DEVICE=$$DEVICE,STATE=$$STATE1,COMP1=$$COMP1,COMP2=$$COMP2" )
$$ENDIF(COMP3)
$$ENDIF(COMP4)
$$ENDIF(COMP5)
$$ENDIF(COMP6)
$$ENDIF(COMP7)
$$ENDIF(COMP8)
$$ENDIF(COMP9)
$$IF(STATE2)
$$IF(COMP9)
dbLoadRecords( "$(TOP)/db/state_with_9components.db", "DEVICE=$$DEVICE,STATE=$$STATE2,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6,COMP7=$$COMP7,COMP8=$$COMP8,COMP9=$$COMP9" )
$$ELSE(COMP9)
$$IF(COMP8)
dbLoadRecords( "$(TOP)/db/state_with_8components.db", "DEVICE=$$DEVICE,STATE=$$STATE2,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6,COMP7=$$COMP7,COMP8=$$COMP8" )
$$ELSE(COMP8)
$$IF(COMP7)
dbLoadRecords( "$(TOP)/db/state_with_7components.db", "DEVICE=$$DEVICE,STATE=$$STATE2,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6,COMP7=$$COMP7" )
$$ELSE(COMP7)
$$IF(COMP6)
dbLoadRecords( "$(TOP)/db/state_with_6components.db", "DEVICE=$$DEVICE,STATE=$$STATE2,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6" )
$$ELSE(COMP6)
$$IF(COMP5)
dbLoadRecords( "$(TOP)/db/state_with_5components.db", "DEVICE=$$DEVICE,STATE=$$STATE2,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5" )
$$ELSE(COMP5)
$$IF(COMP4)
dbLoadRecords( "$(TOP)/db/state_with_4components.db", "DEVICE=$$DEVICE,STATE=$$STATE2,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4" )
$$ELSE(COMP4)
$$IF(COMP3)
dbLoadRecords( "$(TOP)/db/state_with_3components.db", "DEVICE=$$DEVICE,STATE=$$STATE2,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3" )
$$ELSE(COMP3)
dbLoadRecords( "$(TOP)/db/state_with_2components.db", "DEVICE=$$DEVICE,STATE=$$STATE2,COMP1=$$COMP1,COMP2=$$COMP2" )
$$ENDIF(COMP3)
$$ENDIF(COMP4)
$$ENDIF(COMP5)
$$ENDIF(COMP6)
$$ENDIF(COMP7)
$$ENDIF(COMP8)
$$ENDIF(COMP9)
$$ENDIF(STATE2)
$$IF(STATE3)
$$IF(COMP9)
dbLoadRecords( "$(TOP)/db/state_with_9components.db", "DEVICE=$$DEVICE,STATE=$$STATE3,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6,COMP7=$$COMP7,COMP8=$$COMP8,COMP9=$$COMP9" )
$$ELSE(COMP9)
$$IF(COMP8)
dbLoadRecords( "$(TOP)/db/state_with_8components.db", "DEVICE=$$DEVICE,STATE=$$STATE3,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6,COMP7=$$COMP7,COMP8=$$COMP8" )
$$ELSE(COMP8)
$$IF(COMP7)
dbLoadRecords( "$(TOP)/db/state_with_7components.db", "DEVICE=$$DEVICE,STATE=$$STATE3,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6,COMP7=$$COMP7" )
$$ELSE(COMP7)
$$IF(COMP6)
dbLoadRecords( "$(TOP)/db/state_with_6components.db", "DEVICE=$$DEVICE,STATE=$$STATE3,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6" )
$$ELSE(COMP6)
$$IF(COMP5)
dbLoadRecords( "$(TOP)/db/state_with_5components.db", "DEVICE=$$DEVICE,STATE=$$STATE3,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5" )
$$ELSE(COMP5)
$$IF(COMP4)
dbLoadRecords( "$(TOP)/db/state_with_4components.db", "DEVICE=$$DEVICE,STATE=$$STATE3,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4" )
$$ELSE(COMP4)
$$IF(COMP3)
dbLoadRecords( "$(TOP)/db/state_with_3components.db", "DEVICE=$$DEVICE,STATE=$$STATE3,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3" )
$$ELSE(COMP3)
dbLoadRecords( "$(TOP)/db/state_with_2components.db", "DEVICE=$$DEVICE,STATE=$$STATE3,COMP1=$$COMP1,COMP2=$$COMP2" )
$$ENDIF(COMP3)
$$ENDIF(COMP4)
$$ENDIF(COMP5)
$$ENDIF(COMP6)
$$ENDIF(COMP7)
$$ENDIF(COMP8)
$$ENDIF(COMP9)
$$ENDIF(STATE3)
$$IF(STATE4)
$$IF(COMP9)
dbLoadRecords( "$(TOP)/db/state_with_9components.db", "DEVICE=$$DEVICE,STATE=$$STATE4,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6,COMP7=$$COMP7,COMP8=$$COMP8,COMP9=$$COMP9" )
$$ELSE(COMP9)
$$IF(COMP8)
dbLoadRecords( "$(TOP)/db/state_with_8components.db", "DEVICE=$$DEVICE,STATE=$$STATE4,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6,COMP7=$$COMP7,COMP8=$$COMP8" )
$$ELSE(COMP8)
$$IF(COMP7)
dbLoadRecords( "$(TOP)/db/state_with_7components.db", "DEVICE=$$DEVICE,STATE=$$STATE4,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6,COMP7=$$COMP7" )
$$ELSE(COMP7)
$$IF(COMP6)
dbLoadRecords( "$(TOP)/db/state_with_6components.db", "DEVICE=$$DEVICE,STATE=$$STATE4,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6" )
$$ELSE(COMP6)
$$IF(COMP5)
dbLoadRecords( "$(TOP)/db/state_with_5components.db", "DEVICE=$$DEVICE,STATE=$$STATE4,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5" )
$$ELSE(COMP5)
$$IF(COMP4)
dbLoadRecords( "$(TOP)/db/state_with_4components.db", "DEVICE=$$DEVICE,STATE=$$STATE4,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4" )
$$ELSE(COMP4)
$$IF(COMP3)
dbLoadRecords( "$(TOP)/db/state_with_3components.db", "DEVICE=$$DEVICE,STATE=$$STATE4,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3" )
$$ELSE(COMP3)
dbLoadRecords( "$(TOP)/db/state_with_2components.db", "DEVICE=$$DEVICE,STATE=$$STATE4,COMP1=$$COMP1,COMP2=$$COMP2" )
$$ENDIF(COMP3)
$$ENDIF(COMP4)
$$ENDIF(COMP5)
$$ENDIF(COMP6)
$$ENDIF(COMP7)
$$ENDIF(COMP8)
$$ENDIF(COMP9)
$$ENDIF(STATE4)
$$IF(STATE5)
$$IF(COMP9)
dbLoadRecords( "$(TOP)/db/state_with_9components.db", "DEVICE=$$DEVICE,STATE=$$STATE5,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6,COMP7=$$COMP7,COMP8=$$COMP8,COMP9=$$COMP9" )
$$ELSE(COMP9)
$$IF(COMP8)
dbLoadRecords( "$(TOP)/db/state_with_8components.db", "DEVICE=$$DEVICE,STATE=$$STATE5,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6,COMP7=$$COMP7,COMP8=$$COMP8" )
$$ELSE(COMP8)
$$IF(COMP7)
dbLoadRecords( "$(TOP)/db/state_with_7components.db", "DEVICE=$$DEVICE,STATE=$$STATE5,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6,COMP7=$$COMP7" )
$$ELSE(COMP7)
$$IF(COMP6)
dbLoadRecords( "$(TOP)/db/state_with_6components.db", "DEVICE=$$DEVICE,STATE=$$STATE5,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6" )
$$ELSE(COMP6)
$$IF(COMP5)
dbLoadRecords( "$(TOP)/db/state_with_5components.db", "DEVICE=$$DEVICE,STATE=$$STATE5,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5" )
$$ELSE(COMP5)
$$IF(COMP4)
dbLoadRecords( "$(TOP)/db/state_with_4components.db", "DEVICE=$$DEVICE,STATE=$$STATE5,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4" )
$$ELSE(COMP4)
$$IF(COMP3)
dbLoadRecords( "$(TOP)/db/state_with_3components.db", "DEVICE=$$DEVICE,STATE=$$STATE5,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3" )
$$ELSE(COMP3)
dbLoadRecords( "$(TOP)/db/state_with_2components.db", "DEVICE=$$DEVICE,STATE=$$STATE5,COMP1=$$COMP1,COMP2=$$COMP2" )
$$ENDIF(COMP3)
$$ENDIF(COMP4)
$$ENDIF(COMP5)
$$ENDIF(COMP6)
$$ENDIF(COMP7)
$$ENDIF(COMP8)
$$ENDIF(COMP9)
$$ENDIF(STATE5)
$$IF(STATE6)
$$IF(COMP9)
dbLoadRecords( "$(TOP)/db/state_with_9components.db", "DEVICE=$$DEVICE,STATE=$$STATE6,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6,COMP7=$$COMP7,COMP8=$$COMP8,COMP9=$$COMP9" )
$$ELSE(COMP9)
$$IF(COMP8)
dbLoadRecords( "$(TOP)/db/state_with_8components.db", "DEVICE=$$DEVICE,STATE=$$STATE6,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6,COMP7=$$COMP7,COMP8=$$COMP8" )
$$ELSE(COMP8)
$$IF(COMP7)
dbLoadRecords( "$(TOP)/db/state_with_7components.db", "DEVICE=$$DEVICE,STATE=$$STATE6,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6,COMP7=$$COMP7" )
$$ELSE(COMP7)
$$IF(COMP6)
dbLoadRecords( "$(TOP)/db/state_with_6components.db", "DEVICE=$$DEVICE,STATE=$$STATE6,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6" )
$$ELSE(COMP6)
$$IF(COMP5)
dbLoadRecords( "$(TOP)/db/state_with_5components.db", "DEVICE=$$DEVICE,STATE=$$STATE6,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5" )
$$ELSE(COMP5)
$$IF(COMP4)
dbLoadRecords( "$(TOP)/db/state_with_4components.db", "DEVICE=$$DEVICE,STATE=$$STATE6,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4" )
$$ELSE(COMP4)
$$IF(COMP3)
dbLoadRecords( "$(TOP)/db/state_with_3components.db", "DEVICE=$$DEVICE,STATE=$$STATE6,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3" )
$$ELSE(COMP3)
dbLoadRecords( "$(TOP)/db/state_with_2components.db", "DEVICE=$$DEVICE,STATE=$$STATE6,COMP1=$$COMP1,COMP2=$$COMP2" )
$$ENDIF(COMP3)
$$ENDIF(COMP4)
$$ENDIF(COMP5)
$$ENDIF(COMP6)
$$ENDIF(COMP7)
$$ENDIF(COMP8)
$$ENDIF(COMP9)
$$ENDIF(STATE6)
$$IF(STATE7)
$$IF(COMP9)
dbLoadRecords( "$(TOP)/db/state_with_9components.db", "DEVICE=$$DEVICE,STATE=$$STATE7,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6,COMP7=$$COMP7,COMP8=$$COMP8,COMP9=$$COMP9" )
$$ELSE(COMP9)
$$IF(COMP8)
dbLoadRecords( "$(TOP)/db/state_with_8components.db", "DEVICE=$$DEVICE,STATE=$$STATE7,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6,COMP7=$$COMP7,COMP8=$$COMP8" )
$$ELSE(COMP8)
$$IF(COMP7)
dbLoadRecords( "$(TOP)/db/state_with_7components.db", "DEVICE=$$DEVICE,STATE=$$STATE7,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6,COMP7=$$COMP7" )
$$ELSE(COMP7)
$$IF(COMP6)
dbLoadRecords( "$(TOP)/db/state_with_6components.db", "DEVICE=$$DEVICE,STATE=$$STATE7,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6" )
$$ELSE(COMP6)
$$IF(COMP5)
dbLoadRecords( "$(TOP)/db/state_with_5components.db", "DEVICE=$$DEVICE,STATE=$$STATE7,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5" )
$$ELSE(COMP5)
$$IF(COMP4)
dbLoadRecords( "$(TOP)/db/state_with_4components.db", "DEVICE=$$DEVICE,STATE=$$STATE7,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4" )
$$ELSE(COMP4)
$$IF(COMP3)
dbLoadRecords( "$(TOP)/db/state_with_3components.db", "DEVICE=$$DEVICE,STATE=$$STATE7,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3" )
$$ELSE(COMP3)
dbLoadRecords( "$(TOP)/db/state_with_2components.db", "DEVICE=$$DEVICE,STATE=$$STATE7,COMP1=$$COMP1,COMP2=$$COMP2" )
$$ENDIF(COMP3)
$$ENDIF(COMP4)
$$ENDIF(COMP5)
$$ENDIF(COMP6)
$$ENDIF(COMP7)
$$ENDIF(COMP8)
$$ENDIF(COMP9)
$$ENDIF(STATE7)
$$IF(STATE8)
$$IF(COMP9)
dbLoadRecords( "$(TOP)/db/state_with_9components.db", "DEVICE=$$DEVICE,STATE=$$STATE8,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6,COMP7=$$COMP7,COMP8=$$COMP8,COMP9=$$COMP9" )
$$ELSE(COMP9)
$$IF(COMP8)
dbLoadRecords( "$(TOP)/db/state_with_8components.db", "DEVICE=$$DEVICE,STATE=$$STATE8,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6,COMP7=$$COMP7,COMP8=$$COMP8" )
$$ELSE(COMP8)
$$IF(COMP7)
dbLoadRecords( "$(TOP)/db/state_with_7components.db", "DEVICE=$$DEVICE,STATE=$$STATE8,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6,COMP7=$$COMP7" )
$$ELSE(COMP7)
$$IF(COMP6)
dbLoadRecords( "$(TOP)/db/state_with_6components.db", "DEVICE=$$DEVICE,STATE=$$STATE8,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6" )
$$ELSE(COMP6)
$$IF(COMP5)
dbLoadRecords( "$(TOP)/db/state_with_5components.db", "DEVICE=$$DEVICE,STATE=$$STATE8,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5" )
$$ELSE(COMP5)
$$IF(COMP4)
dbLoadRecords( "$(TOP)/db/state_with_4components.db", "DEVICE=$$DEVICE,STATE=$$STATE8,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4" )
$$ELSE(COMP4)
$$IF(COMP3)
dbLoadRecords( "$(TOP)/db/state_with_3components.db", "DEVICE=$$DEVICE,STATE=$$STATE8,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3" )
$$ELSE(COMP3)
dbLoadRecords( "$(TOP)/db/state_with_2components.db", "DEVICE=$$DEVICE,STATE=$$STATE8,COMP1=$$COMP1,COMP2=$$COMP2" )
$$ENDIF(COMP3)
$$ENDIF(COMP4)
$$ENDIF(COMP5)
$$ENDIF(COMP6)
$$ENDIF(COMP7)
$$ENDIF(COMP8)
$$ENDIF(COMP9)
$$ENDIF(STATE8)
$$IF(STATE9)
$$IF(COMP9)
dbLoadRecords( "$(TOP)/db/state_with_9components.db", "DEVICE=$$DEVICE,STATE=$$STATE9,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6,COMP7=$$COMP7,COMP8=$$COMP8,COMP9=$$COMP9" )
$$ELSE(COMP9)
$$IF(COMP8)
dbLoadRecords( "$(TOP)/db/state_with_8components.db", "DEVICE=$$DEVICE,STATE=$$STATE9,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6,COMP7=$$COMP7,COMP8=$$COMP8" )
$$ELSE(COMP8)
$$IF(COMP7)
dbLoadRecords( "$(TOP)/db/state_with_7components.db", "DEVICE=$$DEVICE,STATE=$$STATE9,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6,COMP7=$$COMP7" )
$$ELSE(COMP7)
$$IF(COMP6)
dbLoadRecords( "$(TOP)/db/state_with_6components.db", "DEVICE=$$DEVICE,STATE=$$STATE9,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6" )
$$ELSE(COMP6)
$$IF(COMP5)
dbLoadRecords( "$(TOP)/db/state_with_5components.db", "DEVICE=$$DEVICE,STATE=$$STATE9,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5" )
$$ELSE(COMP5)
$$IF(COMP4)
dbLoadRecords( "$(TOP)/db/state_with_4components.db", "DEVICE=$$DEVICE,STATE=$$STATE9,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4" )
$$ELSE(COMP4)
$$IF(COMP3)
dbLoadRecords( "$(TOP)/db/state_with_3components.db", "DEVICE=$$DEVICE,STATE=$$STATE9,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3" )
$$ELSE(COMP3)
dbLoadRecords( "$(TOP)/db/state_with_2components.db", "DEVICE=$$DEVICE,STATE=$$STATE9,COMP1=$$COMP1,COMP2=$$COMP2" )
$$ENDIF(COMP3)
$$ENDIF(COMP4)
$$ENDIF(COMP5)
$$ENDIF(COMP6)
$$ENDIF(COMP7)
$$ENDIF(COMP8)
$$ENDIF(COMP9)
dbLoadRecords( "$(TOP)/db/device_with_9states.db", "DEVICE=$$DEVICE,STATE1=$$STATE1,SEVR1=$$IF(SEVR1,$$SEVR1,NO_ALARM),STATE2=$$STATE2,SEVR2=$$IF(SEVR2,$$SEVR2,NO_ALARM),STATE3=$$STATE3,SEVR3=$$IF(SEVR3,$$SEVR3,NO_ALARM),STATE4=$$STATE4,SEVR4=$$IF(SEVR4,$$SEVR4,NO_ALARM),STATE5=$$STATE5,SEVR5=$$IF(SEVR5,$$SEVR5,NO_ALARM),STATE6=$$STATE6,SEVR6=$$IF(SEVR6,$$SEVR6,NO_ALARM),STATE7=$$STATE7,SEVR7=$$IF(SEVR7,$$SEVR7,NO_ALARM),STATE8=$$STATE8,SEVR8=$$IF(SEVR8,$$SEVR8,NO_ALARM),STATE9=$$STATE9,SEVR9=$$IF(SEVR9,$$SEVR9,NO_ALARM)" )
$$ELSE(STATE9)
$$IF(STATE8)
dbLoadRecords( "$(TOP)/db/device_with_8states.db", "DEVICE=$$DEVICE,STATE1=$$STATE1,SEVR1=$$IF(SEVR1,$$SEVR1,NO_ALARM),STATE2=$$STATE2,SEVR2=$$IF(SEVR2,$$SEVR2,NO_ALARM),STATE3=$$STATE3,SEVR3=$$IF(SEVR3,$$SEVR3,NO_ALARM),STATE4=$$STATE4,SEVR4=$$IF(SEVR4,$$SEVR4,NO_ALARM),STATE5=$$STATE5,SEVR5=$$IF(SEVR5,$$SEVR5,NO_ALARM),STATE6=$$STATE6,SEVR6=$$IF(SEVR6,$$SEVR6,NO_ALARM),STATE7=$$STATE7,SEVR7=$$IF(SEVR7,$$SEVR7,NO_ALARM),STATE8=$$STATE8,SEVR8=$$IF(SEVR8,$$SEVR8,NO_ALARM)" )
$$ELSE(STATE8)
$$IF(STATE7)
dbLoadRecords( "$(TOP)/db/device_with_7states.db", "DEVICE=$$DEVICE,STATE1=$$STATE1,SEVR1=$$IF(SEVR1,$$SEVR1,NO_ALARM),STATE2=$$STATE2,SEVR2=$$IF(SEVR2,$$SEVR2,NO_ALARM),STATE3=$$STATE3,SEVR3=$$IF(SEVR3,$$SEVR3,NO_ALARM),STATE4=$$STATE4,SEVR4=$$IF(SEVR4,$$SEVR4,NO_ALARM),STATE5=$$STATE5,SEVR5=$$IF(SEVR5,$$SEVR5,NO_ALARM),STATE6=$$STATE6,SEVR6=$$IF(SEVR6,$$SEVR6,NO_ALARM),STATE7=$$STATE7,SEVR7=$$IF(SEVR7,$$SEVR7,NO_ALARM)" )
$$ELSE(STATE7)
$$IF(STATE6)
dbLoadRecords( "$(TOP)/db/device_with_6states.db", "DEVICE=$$DEVICE,STATE1=$$STATE1,SEVR1=$$IF(SEVR1,$$SEVR1,NO_ALARM),STATE2=$$STATE2,SEVR2=$$IF(SEVR2,$$SEVR2,NO_ALARM),STATE3=$$STATE3,SEVR3=$$IF(SEVR3,$$SEVR3,NO_ALARM),STATE4=$$STATE4,SEVR4=$$IF(SEVR4,$$SEVR4,NO_ALARM),STATE5=$$STATE5,SEVR5=$$IF(SEVR5,$$SEVR5,NO_ALARM),STATE6=$$STATE6,SEVR6=$$IF(SEVR6,$$SEVR6,NO_ALARM)" )
$$ELSE(STATE6)
$$IF(STATE5)
dbLoadRecords( "$(TOP)/db/device_with_5states.db", "DEVICE=$$DEVICE,STATE1=$$STATE1,SEVR1=$$IF(SEVR1,$$SEVR1,NO_ALARM),STATE2=$$STATE2,SEVR2=$$IF(SEVR2,$$SEVR2,NO_ALARM),STATE3=$$STATE3,SEVR3=$$IF(SEVR3,$$SEVR3,NO_ALARM),STATE4=$$STATE4,SEVR4=$$IF(SEVR4,$$SEVR4,NO_ALARM),STATE5=$$STATE5,SEVR5=$$IF(SEVR5,$$SEVR5,NO_ALARM)" )
$$ELSE(STATE5)
$$IF(STATE4)
dbLoadRecords( "$(TOP)/db/device_with_4states.db", "DEVICE=$$DEVICE,STATE1=$$STATE1,SEVR1=$$IF(SEVR1,$$SEVR1,NO_ALARM),STATE2=$$STATE2,SEVR2=$$IF(SEVR2,$$SEVR2,NO_ALARM),STATE3=$$STATE3,SEVR3=$$IF(SEVR3,$$SEVR3,NO_ALARM),STATE4=$$STATE4,SEVR4=$$IF(SEVR4,$$SEVR4,NO_ALARM)" )
$$ELSE(STATE4)
$$IF(STATE3)
dbLoadRecords( "$(TOP)/db/device_with_3states.db", "DEVICE=$$DEVICE,STATE1=$$STATE1,SEVR1=$$IF(SEVR1,$$SEVR1,NO_ALARM),STATE2=$$STATE2,SEVR2=$$IF(SEVR2,$$SEVR2,NO_ALARM),STATE3=$$STATE3,SEVR3=$$IF(SEVR3,$$SEVR3,NO_ALARM)" )
$$ELSE(STATE3)
$$IF(STATE2)
dbLoadRecords( "$(TOP)/db/device_with_2states.db", "DEVICE=$$DEVICE,STATE1=$$STATE1,SEVR1=$$IF(SEVR1,$$SEVR1,NO_ALARM),STATE2=$$STATE2,SEVR2=$$IF(SEVR2,$$SEVR2,NO_ALARM)" )
$$ENDIF(STATE2)
$$ENDIF(STATE3)
$$ENDIF(STATE4)
$$ENDIF(STATE5)
$$ENDIF(STATE6)
$$ENDIF(STATE7)
$$ENDIF(STATE8)
$$ENDIF(STATE9)
dbLoadRecords( "$(TOP)/db/alias.db", "SOURCE=$$MOTOR,ALIAS=$$DEVICE:MOTOR" )
$$ENDLOOP(COMBINE)

$$LOOP(DISP_ILK)
dbLoadRecords( "$(TOP)/db/disp_interlock.db", "ILK=$$IF(ILK,$$ILK,$$MOTOR:ILK),NAME=$$NAME,MOTOR=$$MOTOR,CALC_DESC=$$CALC_DESC,A=$$A,B=$$B,C=$$C,D=$$D,E=$$E,F=$$F,G=$$G,H=$$H,I=$$I,J=$$J,K=$$K,L=$$L,CALC=$$CALC,CALC_OUT=$$CALC_OUT,CALC_SCAN=$$IF(CALC_SCAN,$$CALC_SCAN,.1 second),CALC_PINI=$$IF(CALC_PINI,$$CALC_PINI,YES),VAL_OK=$$IF(VAL_OK,$$VAL_OK,0),VAL_ERR=$$IF(VAL_ERR,$$VAL_ERR,1),ERR_MSG=$$IF(ERR_MSG,$$ERR_MSG,$$NAME Engaged!),FAULT_FLNK=$$FAULT_FLNK" )
$$ENDLOOP(DISP_ILK)
$$LOOP(LIMIT_ILK)
dbLoadRecords( "$(TOP)/db/limit_interlock.db", "ILK=$$IF(ILK,$$ILK,$$MOTOR:ILK),NAME=$$NAME,MOTOR=$$MOTOR,A=$$A,B=$$B,C=$$C,D=$$D,E=$$E,F=$$F,G=$$G,H=$$H,I=$$I,J=$$J,K=$$K,L=$$L,LSELECT=$$LSELECT,CALC_SCAN=$$IF(CALC_SCAN,$$CALC_SCAN,.1 second),LOOSE_DHLM=$$LOOSE_DHLM,LOOSE_DLLM=$$LOOSE_DLLM,TIGHT_DHLM=$$TIGHT_DHLM,TIGHT_DLLM=$$TIGHT_DLLM" )
$$ENDLOOP(LIMIT_ILK)
$$LOOP(TEMP_ILK)
dbLoadRecords( "$(TOP)/db/temperature_ilk.db", "ILK=$$IF(ILK,$$ILK,$$MOTOR:ILK),DESC=$$DESC,MOTOR=$$MOTOR,TEMP=$$TEMP,LOCK=$$IF(LOCK,$$LOCK,0),RELEASE=$$IF(RELEASE,$$RELEASE,0)" )
$$ENDLOOP(TEMP_ILK)

var imsRecordDebug 0
# var save_restoreDebug 30

# autosave
save_restoreSet_status_prefix( "$(EPICS_NAME):" )
save_restoreSet_NumSeqFiles       (  5 )
save_restoreSet_SeqPeriodInSeconds( 30 )

save_restoreSet_IncompleteSetsOk  (  1 )
save_restoreSet_DatedBackupFiles  (  1 )

set_requestfile_path ( "$(PWD)/../../autosave"          )
set_savefile_path    ( "$(IOC_DATA)/$$IOCNAME/autosave" )

set_pass0_restoreFile( "$$IOCNAME.sav"                  )
$$IF(NAVITARNAME0)
set_pass1_restoreFile( "$$IOCNAME.sav"                  )
$$ENDIF(NAVITARNAME0)
$$IF(LKUPNAME0)
set_pass1_restoreFile( "$$IOCNAME.sav"                  )
$$ENDIF(LKUPNAME0)

# Initialize the IOC and start processing records
iocInit()

create_monitor_set( "$$IOCNAME.req", 30, "" );

# All IOCs should dump some common info after initial startup.
< /reg/d/iocCommon/All/post_linux.cmd

