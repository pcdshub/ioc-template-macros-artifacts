#!$$IOCTOP/bin/$$IF(ARCH,$$ARCH,linux-x86_64)/states

< envPaths
epicsEnvSet("IOCNAME", "$$IOCNAME" )
epicsEnvSet("ENGINEER", "$$ENGINEER" )
epicsEnvSet("LOCATION", "$$LOCATION" )
epicsEnvSet("IOCSH_PS1", "$(IOCNAME)> " )
epicsEnvSet("IOC_PV", "$$IOC_PV")
epicsEnvSet("IOCTOP", "$$IOCTOP")
epicsEnvSet("TOP", "$$TOP")

cd( "$(IOCTOP)" )

# Run the pre startup script
< /reg/d/iocCommon/All/pre_linux.cmd

# Register all support components
dbLoadDatabase("dbd/states.dbd")
states_registerRecordDeviceDriver(pdbbase)

# Load record instances
dbLoadRecords("db/iocSoft.db", "IOC=$(IOC_PV)")
dbLoadRecords("db/save_restoreStatus.db", "IOC=$(IOC_PV)")
$$LOOP(STATES)
dbLoadRecords( "db/one_state.db", "DEVICE=$$DEVICE,STATE=$$STATE1,SET=$$IF(POS1,$$POS1,0),DELTA=$$IF(DELTA1,$$DELTA1,0.5),MOVER=$$MOTOR.VAL,RBV=$$IF(RBV,$$RBV,$$MOTOR.RBV)" )
$$IF(STATE2)
dbLoadRecords( "db/one_state.db", "DEVICE=$$DEVICE,STATE=$$STATE2,SET=$$IF(POS2,$$POS2,0),DELTA=$$IF(DELTA2,$$DELTA2,0.5),MOVER=$$MOTOR.VAL,RBV=$$IF(RBV,$$RBV,$$MOTOR.RBV)" )
$$ENDIF(STATE2)
$$IF(STATE3)
dbLoadRecords( "db/one_state.db", "DEVICE=$$DEVICE,STATE=$$STATE3,SET=$$IF(POS3,$$POS3,0),DELTA=$$IF(DELTA3,$$DELTA3,0.5),MOVER=$$MOTOR.VAL,RBV=$$IF(RBV,$$RBV,$$MOTOR.RBV)" )
$$ENDIF(STATE3)
$$IF(STATE4)
dbLoadRecords( "db/one_state.db", "DEVICE=$$DEVICE,STATE=$$STATE4,SET=$$IF(POS4,$$POS4,0),DELTA=$$IF(DELTA4,$$DELTA4,0.5),MOVER=$$MOTOR.VAL,RBV=$$IF(RBV,$$RBV,$$MOTOR.RBV)" )
$$ENDIF(STATE4)
$$IF(STATE5)
dbLoadRecords( "db/one_state.db", "DEVICE=$$DEVICE,STATE=$$STATE5,SET=$$IF(POS5,$$POS5,0),DELTA=$$IF(DELTA5,$$DELTA5,0.5),MOVER=$$MOTOR.VAL,RBV=$$IF(RBV,$$RBV,$$MOTOR.RBV)" )
$$ENDIF(STATE5)
$$IF(STATE6)
dbLoadRecords( "db/one_state.db", "DEVICE=$$DEVICE,STATE=$$STATE6,SET=$$IF(POS6,$$POS6,0),DELTA=$$IF(DELTA6,$$DELTA6,0.5),MOVER=$$MOTOR.VAL,RBV=$$IF(RBV,$$RBV,$$MOTOR.RBV)" )
$$ENDIF(STATE6)
$$IF(STATE7)
dbLoadRecords( "db/one_state.db", "DEVICE=$$DEVICE,STATE=$$STATE7,SET=$$IF(POS7,$$POS7,0),DELTA=$$IF(DELTA7,$$DELTA7,0.5),MOVER=$$MOTOR.VAL,RBV=$$IF(RBV,$$RBV,$$MOTOR.RBV)" )
$$ENDIF(STATE7)
$$IF(STATE8)
dbLoadRecords( "db/one_state.db", "DEVICE=$$DEVICE,STATE=$$STATE8,SET=$$IF(POS8,$$POS8,0),DELTA=$$IF(DELTA8,$$DELTA8,0.5),MOVER=$$MOTOR.VAL,RBV=$$IF(RBV,$$RBV,$$MOTOR.RBV)" )
dbLoadRecords( "db/device_with_8states.db", "DEVICE=$$DEVICE,STATE1=$$STATE1,SEVR1=$$IF(SEVR1,$$SEVR1,NO_ALARM),STATE2=$$STATE2,SEVR2=$$IF(SEVR2,$$SEVR2,NO_ALARM),STATE3=$$STATE3,SEVR3=$$IF(SEVR3,$$SEVR3,NO_ALARM),STATE4=$$STATE4,SEVR4=$$IF(SEVR4,$$SEVR4,NO_ALARM),STATE5=$$STATE5,SEVR5=$$IF(SEVR5,$$SEVR5,NO_ALARM),STATE6=$$STATE6,SEVR6=$$IF(SEVR6,$$SEVR6,NO_ALARM),STATE7=$$STATE7,SEVR7=$$IF(SEVR7,$$SEVR7,NO_ALARM),STATE8=$$STATE8,SEVR8=$$IF(SEVR8,$$SEVR8,NO_ALARM)" )
$$ELSE(STATE8)
$$IF(STATE7)
dbLoadRecords( "db/device_with_7states.db", "DEVICE=$$DEVICE,STATE1=$$STATE1,SEVR1=$$IF(SEVR1,$$SEVR1,NO_ALARM),STATE2=$$STATE2,SEVR2=$$IF(SEVR2,$$SEVR2,NO_ALARM),STATE3=$$STATE3,SEVR3=$$IF(SEVR3,$$SEVR3,NO_ALARM),STATE4=$$STATE4,SEVR4=$$IF(SEVR4,$$SEVR4,NO_ALARM),STATE5=$$STATE5,SEVR5=$$IF(SEVR5,$$SEVR5,NO_ALARM),STATE6=$$STATE6,SEVR6=$$IF(SEVR6,$$SEVR6,NO_ALARM),STATE7=$$STATE7,SEVR7=$$IF(SEVR7,$$SEVR7,NO_ALARM)" )
$$ELSE(STATE7)
$$IF(STATE6)
dbLoadRecords( "db/device_with_6states.db", "DEVICE=$$DEVICE,STATE1=$$STATE1,SEVR1=$$IF(SEVR1,$$SEVR1,NO_ALARM),STATE2=$$STATE2,SEVR2=$$IF(SEVR2,$$SEVR2,NO_ALARM),STATE3=$$STATE3,SEVR3=$$IF(SEVR3,$$SEVR3,NO_ALARM),STATE4=$$STATE4,SEVR4=$$IF(SEVR4,$$SEVR4,NO_ALARM),STATE5=$$STATE5,SEVR5=$$IF(SEVR5,$$SEVR5,NO_ALARM),STATE6=$$STATE6,SEVR6=$$IF(SEVR6,$$SEVR6,NO_ALARM)" )
$$ELSE(STATE6)
$$IF(STATE5)
dbLoadRecords( "db/device_with_5states.db", "DEVICE=$$DEVICE,STATE1=$$STATE1,SEVR1=$$IF(SEVR1,$$SEVR1,NO_ALARM),STATE2=$$STATE2,SEVR2=$$IF(SEVR2,$$SEVR2,NO_ALARM),STATE3=$$STATE3,SEVR3=$$IF(SEVR3,$$SEVR3,NO_ALARM),STATE4=$$STATE4,SEVR4=$$IF(SEVR4,$$SEVR4,NO_ALARM),STATE5=$$STATE5,SEVR5=$$IF(SEVR5,$$SEVR5,NO_ALARM)" )
$$ELSE(STATE5)
$$IF(STATE4)
dbLoadRecords( "db/device_with_4states.db", "DEVICE=$$DEVICE,STATE1=$$STATE1,SEVR1=$$IF(SEVR1,$$SEVR1,NO_ALARM),STATE2=$$STATE2,SEVR2=$$IF(SEVR2,$$SEVR2,NO_ALARM),STATE3=$$STATE3,SEVR3=$$IF(SEVR3,$$SEVR3,NO_ALARM),STATE4=$$STATE4,SEVR4=$$IF(SEVR4,$$SEVR4,NO_ALARM)" )
$$ELSE(STATE4)
$$IF(STATE3)
dbLoadRecords( "db/device_with_3states.db", "DEVICE=$$DEVICE,STATE1=$$STATE1,SEVR1=$$IF(SEVR1,$$SEVR1,NO_ALARM),STATE2=$$STATE2,SEVR2=$$IF(SEVR2,$$SEVR2,NO_ALARM),STATE3=$$STATE3,SEVR3=$$IF(SEVR3,$$SEVR3,NO_ALARM)" )
$$ELSE(STATE3)
$$IF(STATE2)
dbLoadRecords( "db/device_with_2states.db", "DEVICE=$$DEVICE,STATE1=$$STATE1,SEVR1=$$IF(SEVR1,$$SEVR1,NO_ALARM),STATE2=$$STATE2,SEVR2=$$IF(SEVR2,$$SEVR2,NO_ALARM)" )
$$ENDIF(STATE2)
$$ENDIF(STATE3)
$$ENDIF(STATE4)
$$ENDIF(STATE5)
$$ENDIF(STATE6)
$$ENDIF(STATE7)
$$ENDIF(STATE8)
$$ENDLOOP(STATES)

$$LOOP(COMBINE)
$$IF(COMP9)
dbLoadRecords( "db/state_with_9components.db", "DEVICE=$$DEVICE,STATE=$$STATE1,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6,COMP7=$$COMP7,COMP8=$$COMP8,COMP9=$$COMP9" )
$$ELSE(COMP9)
$$IF(COMP8)
dbLoadRecords( "db/state_with_8components.db", "DEVICE=$$DEVICE,STATE=$$STATE1,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6,COMP7=$$COMP7,COMP8=$$COMP8" )
$$ELSE(COMP8)
$$IF(COMP7)
dbLoadRecords( "db/state_with_7components.db", "DEVICE=$$DEVICE,STATE=$$STATE1,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6,COMP7=$$COMP7" )
$$ELSE(COMP7)
$$IF(COMP6)
dbLoadRecords( "db/state_with_6components.db", "DEVICE=$$DEVICE,STATE=$$STATE1,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6" )
$$ELSE(COMP6)
$$IF(COMP5)
dbLoadRecords( "db/state_with_5components.db", "DEVICE=$$DEVICE,STATE=$$STATE1,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5" )
$$ELSE(COMP5)
$$IF(COMP4)
dbLoadRecords( "db/state_with_4components.db", "DEVICE=$$DEVICE,STATE=$$STATE1,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4" )
$$ELSE(COMP4)
$$IF(COMP3)
dbLoadRecords( "db/state_with_3components.db", "DEVICE=$$DEVICE,STATE=$$STATE1,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3" )
$$ELSE(COMP3)
dbLoadRecords( "db/state_with_2components.db", "DEVICE=$$DEVICE,STATE=$$STATE1,COMP1=$$COMP1,COMP2=$$COMP2" )
$$ENDIF(COMP3)
$$ENDIF(COMP4)
$$ENDIF(COMP5)
$$ENDIF(COMP6)
$$ENDIF(COMP7)
$$ENDIF(COMP8)
$$ENDIF(COMP9)
$$IF(STATE2)
$$IF(COMP9)
dbLoadRecords( "db/state_with_9components.db", "DEVICE=$$DEVICE,STATE=$$STATE2,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6,COMP7=$$COMP7,COMP8=$$COMP8,COMP9=$$COMP9" )
$$ELSE(COMP9)
$$IF(COMP8)
dbLoadRecords( "db/state_with_8components.db", "DEVICE=$$DEVICE,STATE=$$STATE2,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6,COMP7=$$COMP7,COMP8=$$COMP8" )
$$ELSE(COMP8)
$$IF(COMP7)
dbLoadRecords( "db/state_with_7components.db", "DEVICE=$$DEVICE,STATE=$$STATE2,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6,COMP7=$$COMP7" )
$$ELSE(COMP7)
$$IF(COMP6)
dbLoadRecords( "db/state_with_6components.db", "DEVICE=$$DEVICE,STATE=$$STATE2,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6" )
$$ELSE(COMP6)
$$IF(COMP5)
dbLoadRecords( "db/state_with_5components.db", "DEVICE=$$DEVICE,STATE=$$STATE2,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5" )
$$ELSE(COMP5)
$$IF(COMP4)
dbLoadRecords( "db/state_with_4components.db", "DEVICE=$$DEVICE,STATE=$$STATE2,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4" )
$$ELSE(COMP4)
$$IF(COMP3)
dbLoadRecords( "db/state_with_3components.db", "DEVICE=$$DEVICE,STATE=$$STATE2,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3" )
$$ELSE(COMP3)
dbLoadRecords( "db/state_with_2components.db", "DEVICE=$$DEVICE,STATE=$$STATE2,COMP1=$$COMP1,COMP2=$$COMP2" )
$$ENDIF(COMP3)
$$ENDIF(COMP4)
$$ENDIF(COMP5)
$$ENDIF(COMP6)
$$ENDIF(COMP7)
$$ENDIF(COMP8)
$$ENDIF(COMP9)
$$ENDIF(STATE2)
$$IF(STATE3)
$$IF(COMP9)
dbLoadRecords( "db/state_with_9components.db", "DEVICE=$$DEVICE,STATE=$$STATE3,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6,COMP7=$$COMP7,COMP8=$$COMP8,COMP9=$$COMP9" )
$$ELSE(COMP9)
$$IF(COMP8)
dbLoadRecords( "db/state_with_8components.db", "DEVICE=$$DEVICE,STATE=$$STATE3,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6,COMP7=$$COMP7,COMP8=$$COMP8" )
$$ELSE(COMP8)
$$IF(COMP7)
dbLoadRecords( "db/state_with_7components.db", "DEVICE=$$DEVICE,STATE=$$STATE3,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6,COMP7=$$COMP7" )
$$ELSE(COMP7)
$$IF(COMP6)
dbLoadRecords( "db/state_with_6components.db", "DEVICE=$$DEVICE,STATE=$$STATE3,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6" )
$$ELSE(COMP6)
$$IF(COMP5)
dbLoadRecords( "db/state_with_5components.db", "DEVICE=$$DEVICE,STATE=$$STATE3,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5" )
$$ELSE(COMP5)
$$IF(COMP4)
dbLoadRecords( "db/state_with_4components.db", "DEVICE=$$DEVICE,STATE=$$STATE3,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4" )
$$ELSE(COMP4)
$$IF(COMP3)
dbLoadRecords( "db/state_with_3components.db", "DEVICE=$$DEVICE,STATE=$$STATE3,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3" )
$$ELSE(COMP3)
dbLoadRecords( "db/state_with_2components.db", "DEVICE=$$DEVICE,STATE=$$STATE3,COMP1=$$COMP1,COMP2=$$COMP2" )
$$ENDIF(COMP3)
$$ENDIF(COMP4)
$$ENDIF(COMP5)
$$ENDIF(COMP6)
$$ENDIF(COMP7)
$$ENDIF(COMP8)
$$ENDIF(COMP9)
$$ENDIF(STATE3)
$$IF(STATE4)
$$IF(COMP9)
dbLoadRecords( "db/state_with_9components.db", "DEVICE=$$DEVICE,STATE=$$STATE4,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6,COMP7=$$COMP7,COMP8=$$COMP8,COMP9=$$COMP9" )
$$ELSE(COMP9)
$$IF(COMP8)
dbLoadRecords( "db/state_with_8components.db", "DEVICE=$$DEVICE,STATE=$$STATE4,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6,COMP7=$$COMP7,COMP8=$$COMP8" )
$$ELSE(COMP8)
$$IF(COMP7)
dbLoadRecords( "db/state_with_7components.db", "DEVICE=$$DEVICE,STATE=$$STATE4,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6,COMP7=$$COMP7" )
$$ELSE(COMP7)
$$IF(COMP6)
dbLoadRecords( "db/state_with_6components.db", "DEVICE=$$DEVICE,STATE=$$STATE4,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6" )
$$ELSE(COMP6)
$$IF(COMP5)
dbLoadRecords( "db/state_with_5components.db", "DEVICE=$$DEVICE,STATE=$$STATE4,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5" )
$$ELSE(COMP5)
$$IF(COMP4)
dbLoadRecords( "db/state_with_4components.db", "DEVICE=$$DEVICE,STATE=$$STATE4,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4" )
$$ELSE(COMP4)
$$IF(COMP3)
dbLoadRecords( "db/state_with_3components.db", "DEVICE=$$DEVICE,STATE=$$STATE4,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3" )
$$ELSE(COMP3)
dbLoadRecords( "db/state_with_2components.db", "DEVICE=$$DEVICE,STATE=$$STATE4,COMP1=$$COMP1,COMP2=$$COMP2" )
$$ENDIF(COMP3)
$$ENDIF(COMP4)
$$ENDIF(COMP5)
$$ENDIF(COMP6)
$$ENDIF(COMP7)
$$ENDIF(COMP8)
$$ENDIF(COMP9)
$$ENDIF(STATE4)
$$IF(STATE5)
$$IF(COMP9)
dbLoadRecords( "db/state_with_9components.db", "DEVICE=$$DEVICE,STATE=$$STATE5,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6,COMP7=$$COMP7,COMP8=$$COMP8,COMP9=$$COMP9" )
$$ELSE(COMP9)
$$IF(COMP8)
dbLoadRecords( "db/state_with_8components.db", "DEVICE=$$DEVICE,STATE=$$STATE5,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6,COMP7=$$COMP7,COMP8=$$COMP8" )
$$ELSE(COMP8)
$$IF(COMP7)
dbLoadRecords( "db/state_with_7components.db", "DEVICE=$$DEVICE,STATE=$$STATE5,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6,COMP7=$$COMP7" )
$$ELSE(COMP7)
$$IF(COMP6)
dbLoadRecords( "db/state_with_6components.db", "DEVICE=$$DEVICE,STATE=$$STATE5,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6" )
$$ELSE(COMP6)
$$IF(COMP5)
dbLoadRecords( "db/state_with_5components.db", "DEVICE=$$DEVICE,STATE=$$STATE5,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5" )
$$ELSE(COMP5)
$$IF(COMP4)
dbLoadRecords( "db/state_with_4components.db", "DEVICE=$$DEVICE,STATE=$$STATE5,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4" )
$$ELSE(COMP4)
$$IF(COMP3)
dbLoadRecords( "db/state_with_3components.db", "DEVICE=$$DEVICE,STATE=$$STATE5,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3" )
$$ELSE(COMP3)
dbLoadRecords( "db/state_with_2components.db", "DEVICE=$$DEVICE,STATE=$$STATE5,COMP1=$$COMP1,COMP2=$$COMP2" )
$$ENDIF(COMP3)
$$ENDIF(COMP4)
$$ENDIF(COMP5)
$$ENDIF(COMP6)
$$ENDIF(COMP7)
$$ENDIF(COMP8)
$$ENDIF(COMP9)
$$ENDIF(STATE5)
$$IF(STATE6)
$$IF(COMP9)
dbLoadRecords( "db/state_with_9components.db", "DEVICE=$$DEVICE,STATE=$$STATE6,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6,COMP7=$$COMP7,COMP8=$$COMP8,COMP9=$$COMP9" )
$$ELSE(COMP9)
$$IF(COMP8)
dbLoadRecords( "db/state_with_8components.db", "DEVICE=$$DEVICE,STATE=$$STATE6,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6,COMP7=$$COMP7,COMP8=$$COMP8" )
$$ELSE(COMP8)
$$IF(COMP7)
dbLoadRecords( "db/state_with_7components.db", "DEVICE=$$DEVICE,STATE=$$STATE6,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6,COMP7=$$COMP7" )
$$ELSE(COMP7)
$$IF(COMP6)
dbLoadRecords( "db/state_with_6components.db", "DEVICE=$$DEVICE,STATE=$$STATE6,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6" )
$$ELSE(COMP6)
$$IF(COMP5)
dbLoadRecords( "db/state_with_5components.db", "DEVICE=$$DEVICE,STATE=$$STATE6,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5" )
$$ELSE(COMP5)
$$IF(COMP4)
dbLoadRecords( "db/state_with_4components.db", "DEVICE=$$DEVICE,STATE=$$STATE6,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4" )
$$ELSE(COMP4)
$$IF(COMP3)
dbLoadRecords( "db/state_with_3components.db", "DEVICE=$$DEVICE,STATE=$$STATE6,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3" )
$$ELSE(COMP3)
dbLoadRecords( "db/state_with_2components.db", "DEVICE=$$DEVICE,STATE=$$STATE6,COMP1=$$COMP1,COMP2=$$COMP2" )
$$ENDIF(COMP3)
$$ENDIF(COMP4)
$$ENDIF(COMP5)
$$ENDIF(COMP6)
$$ENDIF(COMP7)
$$ENDIF(COMP8)
$$ENDIF(COMP9)
$$ENDIF(STATE6)
$$IF(STATE7)
$$IF(COMP9)
dbLoadRecords( "db/state_with_9components.db", "DEVICE=$$DEVICE,STATE=$$STATE7,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6,COMP7=$$COMP7,COMP8=$$COMP8,COMP9=$$COMP9" )
$$ELSE(COMP9)
$$IF(COMP8)
dbLoadRecords( "db/state_with_8components.db", "DEVICE=$$DEVICE,STATE=$$STATE7,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6,COMP7=$$COMP7,COMP8=$$COMP8" )
$$ELSE(COMP8)
$$IF(COMP7)
dbLoadRecords( "db/state_with_7components.db", "DEVICE=$$DEVICE,STATE=$$STATE7,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6,COMP7=$$COMP7" )
$$ELSE(COMP7)
$$IF(COMP6)
dbLoadRecords( "db/state_with_6components.db", "DEVICE=$$DEVICE,STATE=$$STATE7,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6" )
$$ELSE(COMP6)
$$IF(COMP5)
dbLoadRecords( "db/state_with_5components.db", "DEVICE=$$DEVICE,STATE=$$STATE7,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5" )
$$ELSE(COMP5)
$$IF(COMP4)
dbLoadRecords( "db/state_with_4components.db", "DEVICE=$$DEVICE,STATE=$$STATE7,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4" )
$$ELSE(COMP4)
$$IF(COMP3)
dbLoadRecords( "db/state_with_3components.db", "DEVICE=$$DEVICE,STATE=$$STATE7,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3" )
$$ELSE(COMP3)
dbLoadRecords( "db/state_with_2components.db", "DEVICE=$$DEVICE,STATE=$$STATE7,COMP1=$$COMP1,COMP2=$$COMP2" )
$$ENDIF(COMP3)
$$ENDIF(COMP4)
$$ENDIF(COMP5)
$$ENDIF(COMP6)
$$ENDIF(COMP7)
$$ENDIF(COMP8)
$$ENDIF(COMP9)
$$ENDIF(STATE7)
$$IF(STATE8)
$$IF(COMP9)
dbLoadRecords( "db/state_with_9components.db", "DEVICE=$$DEVICE,STATE=$$STATE8,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6,COMP7=$$COMP7,COMP8=$$COMP8,COMP9=$$COMP9" )
$$ELSE(COMP9)
$$IF(COMP8)
dbLoadRecords( "db/state_with_8components.db", "DEVICE=$$DEVICE,STATE=$$STATE8,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6,COMP7=$$COMP7,COMP8=$$COMP8" )
$$ELSE(COMP8)
$$IF(COMP7)
dbLoadRecords( "db/state_with_7components.db", "DEVICE=$$DEVICE,STATE=$$STATE8,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6,COMP7=$$COMP7" )
$$ELSE(COMP7)
$$IF(COMP6)
dbLoadRecords( "db/state_with_6components.db", "DEVICE=$$DEVICE,STATE=$$STATE8,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5,COMP6=$$COMP6" )
$$ELSE(COMP6)
$$IF(COMP5)
dbLoadRecords( "db/state_with_5components.db", "DEVICE=$$DEVICE,STATE=$$STATE8,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4,COMP5=$$COMP5" )
$$ELSE(COMP5)
$$IF(COMP4)
dbLoadRecords( "db/state_with_4components.db", "DEVICE=$$DEVICE,STATE=$$STATE8,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3,COMP4=$$COMP4" )
$$ELSE(COMP4)
$$IF(COMP3)
dbLoadRecords( "db/state_with_3components.db", "DEVICE=$$DEVICE,STATE=$$STATE8,COMP1=$$COMP1,COMP2=$$COMP2,COMP3=$$COMP3" )
$$ELSE(COMP3)
dbLoadRecords( "db/state_with_2components.db", "DEVICE=$$DEVICE,STATE=$$STATE8,COMP1=$$COMP1,COMP2=$$COMP2" )
$$ENDIF(COMP3)
$$ENDIF(COMP4)
$$ENDIF(COMP5)
$$ENDIF(COMP6)
$$ENDIF(COMP7)
$$ENDIF(COMP8)
$$ENDIF(COMP9)
dbLoadRecords( "db/device_with_8states.db", "DEVICE=$$DEVICE,STATE1=$$STATE1,SEVR1=$$IF(SEVR1,$$SEVR1,NO_ALARM),STATE2=$$STATE2,SEVR2=$$IF(SEVR2,$$SEVR2,NO_ALARM),STATE3=$$STATE3,SEVR3=$$IF(SEVR3,$$SEVR3,NO_ALARM),STATE4=$$STATE4,SEVR4=$$IF(SEVR4,$$SEVR4,NO_ALARM),STATE5=$$STATE5,SEVR5=$$IF(SEVR5,$$SEVR5,NO_ALARM),STATE6=$$STATE6,SEVR6=$$IF(SEVR6,$$SEVR6,NO_ALARM),STATE7=$$STATE7,SEVR7=$$IF(SEVR7,$$SEVR7,NO_ALARM),STATE8=$$STATE8,SEVR8=$$IF(SEVR8,$$SEVR8,NO_ALARM)" )
$$ELSE(STATE8)
$$IF(STATE7)
dbLoadRecords( "db/device_with_7states.db", "DEVICE=$$DEVICE,STATE1=$$STATE1,SEVR1=$$IF(SEVR1,$$SEVR1,NO_ALARM),STATE2=$$STATE2,SEVR2=$$IF(SEVR2,$$SEVR2,NO_ALARM),STATE3=$$STATE3,SEVR3=$$IF(SEVR3,$$SEVR3,NO_ALARM),STATE4=$$STATE4,SEVR4=$$IF(SEVR4,$$SEVR4,NO_ALARM),STATE5=$$STATE5,SEVR5=$$IF(SEVR5,$$SEVR5,NO_ALARM),STATE6=$$STATE6,SEVR6=$$IF(SEVR6,$$SEVR6,NO_ALARM),STATE7=$$STATE7,SEVR7=$$IF(SEVR7,$$SEVR7,NO_ALARM)" )
$$ELSE(STATE7)
$$IF(STATE6)
dbLoadRecords( "db/device_with_6states.db", "DEVICE=$$DEVICE,STATE1=$$STATE1,SEVR1=$$IF(SEVR1,$$SEVR1,NO_ALARM),STATE2=$$STATE2,SEVR2=$$IF(SEVR2,$$SEVR2,NO_ALARM),STATE3=$$STATE3,SEVR3=$$IF(SEVR3,$$SEVR3,NO_ALARM),STATE4=$$STATE4,SEVR4=$$IF(SEVR4,$$SEVR4,NO_ALARM),STATE5=$$STATE5,SEVR5=$$IF(SEVR5,$$SEVR5,NO_ALARM),STATE6=$$STATE6,SEVR6=$$IF(SEVR6,$$SEVR6,NO_ALARM)" )
$$ELSE(STATE6)
$$IF(STATE5)
 dbLoadRecords( "db/device_with_5states.db", "DEVICE=$$DEVICE,STATE1=$$STATE1,SEVR1=$$IF(SEVR1,$$SEVR1,NO_ALARM),STATE2=$$STATE2,SEVR2=$$IF(SEVR2,$$SEVR2,NO_ALARM),STATE3=$$STATE3,SEVR3=$$IF(SEVR3,$$SEVR3,NO_ALARM),STATE4=$$STATE4,SEVR4=$$IF(SEVR4,$$SEVR4,NO_ALARM),STATE5=$$STATE5,SEVR5=$$IF(SEVR5,$$SEVR5,NO_ALARM)" )
$$ELSE(STATE5)
$$IF(STATE4)
dbLoadRecords( "db/device_with_4states.db", "DEVICE=$$DEVICE,STATE1=$$STATE1,SEVR1=$$IF(SEVR1,$$SEVR1,NO_ALARM),STATE2=$$STATE2,SEVR2=$$IF(SEVR2,$$SEVR2,NO_ALARM),STATE3=$$STATE3,SEVR3=$$IF(SEVR3,$$SEVR3,NO_ALARM),STATE4=$$STATE4,SEVR4=$$IF(SEVR4,$$SEVR4,NO_ALARM)" )
$$ELSE(STATE4)
$$IF(STATE3)
dbLoadRecords( "db/device_with_3states.db", "DEVICE=$$DEVICE,STATE1=$$STATE1,SEVR1=$$IF(SEVR1,$$SEVR1,NO_ALARM),STATE2=$$STATE2,SEVR2=$$IF(SEVR2,$$SEVR2,NO_ALARM),STATE3=$$STATE3,SEVR3=$$IF(SEVR3,$$SEVR3,NO_ALARM)" )
$$ELSE(STATE3)
$$IF(STATE2)
dbLoadRecords( "db/device_with_2states.db", "DEVICE=$$DEVICE,STATE1=$$STATE1,SEVR1=$$IF(SEVR1,$$SEVR1,NO_ALARM),STATE2=$$STATE2,SEVR2=$$IF(SEVR2,$$SEVR2,NO_ALARM)" )
$$ENDIF(STATE2)
$$ENDIF(STATE3)
$$ENDIF(STATE4)
$$ENDIF(STATE5)
$$ENDIF(STATE6)
$$ENDIF(STATE7)
$$ENDIF(STATE8)
$$ENDLOOP(COMBINE)

# Setup autosave
set_savefile_path("$(IOC_DATA)/$(IOCNAME)/autosave")
set_requestfile_path("$(TOP)/autosave")
save_restoreSet_status_prefix("$(IOC_PV):")
save_restoreSet_IncompleteSetsOk(1)
save_restoreSet_DatedBackupFiles(1)
set_pass0_restoreFile("$(IOCNAME).sav")
set_pass1_restoreFile("$(IOCNAME).sav")
save_restoreSet_NumSeqFiles(5)
save_restoreSet_SeqPeriodInSeconds(30)

# Initialize the IOC and start processing records
iocInit()

# Start autosave backups
create_monitor_set("$(IOCNAME).req", 30, "IOC=$(IOC_PV)")
 
# All IOCs should dump some common info after initial startup.
< /reg/d/iocCommon/All/post_linux.cmd
